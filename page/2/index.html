<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="学习总结 思想感悟">
<meta property="og:type" content="website">
<meta property="og:title" content="Skye's Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Skye's Blog">
<meta property="og:description" content="学习总结 思想感悟">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Skye's Blog">
<meta name="twitter:description" content="学习总结 思想感悟">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/2/"/>

  <title> Skye's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Skye's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Forever youthful,forever weeping</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/28/Git SSH公钥配置/" itemprop="url">
                  Git SSH公钥配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-28T16:28:47+08:00" content="2016-10-28">
              2016-10-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/28/Git SSH公钥配置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/28/Git SSH公钥配置/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Coding.net配置</p>
</blockquote>
<h3 id="账户-SSH-公钥"><a href="#账户-SSH-公钥" class="headerlink" title="账户 SSH 公钥"></a>账户 SSH 公钥</h3><p>账户 SSH 公钥是跟用户账户关联的公钥，一旦设置，SSH 就拥有账户下所有项目仓库的读写权限。 设置“账户 SSH 公钥”是开发者使用 SSH 方式访问/修改代码仓库的“前置工作”，分为“获取 SSH 协议地址”、“生成公钥”、“在 Coding.net 添加公钥”三个步骤。</p>
<h3 id="获取-SSH-协议地址"><a href="#获取-SSH-协议地址" class="headerlink" title="获取 SSH 协议地址"></a>获取 SSH 协议地址</h3><p>在项目的代码页面点击 SSH 切换到 SSH 协议， 获得 clone 地址，形如<code>git@git.coding.net:wzw/leave-a-message.git</code>。 请使用这个地址来访问您的代码仓库。</p>
<h3 id="生成公钥"><a href="#生成公钥" class="headerlink" title="生成公钥"></a>生成公钥</h3><p>Mac/Linux 打开命令行终端, Windows 打开 Git Bash 。 输入<code>ssh-keygen -t rsa -C &quot;username@example.com&quot;</code>,( 注册的邮箱)，接下来点击enter键即可（也可以输入密码）。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;</span><br><span class="line"># Creates a new ssh key, using the provided email as a label</span><br><span class="line"># Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter]  // 推荐使用默认地址,如果使用非默认地址可能需要配置 .ssh/config</span><br><span class="line">成功之后</span><br><span class="line"></span><br><span class="line">Your identification has been saved in /Users/you/.ssh/id_rsa.</span><br><span class="line"># Your public key has been saved in /Users/you/.ssh/id_rsa.pub.</span><br><span class="line"># The key fingerprint is:</span><br><span class="line"># 01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com</span><br></pre></td></tr></table></figure></p>
<h3 id="在-Coding-net-添加公钥"><a href="#在-Coding-net-添加公钥" class="headerlink" title="在 Coding.net 添加公钥"></a>在 Coding.net 添加公钥</h3><p>本地打开 id_rsa.pub 文件（或执行 $cat id_rsa.pub ），复制其中全部内容，添加到账户“SSH 公钥”页面 中，公钥名称可以随意起名字。<br>完成后点击“添加”，然后输入密码或动态码即可添加完成。</p>
<h3 id="完成后在命令行测试，首次建立链接会要求信任主机"><a href="#完成后在命令行测试，首次建立链接会要求信任主机" class="headerlink" title="完成后在命令行测试，首次建立链接会要求信任主机"></a>完成后在命令行测试，首次建立链接会要求信任主机</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@git.coding.net // 注意 git.coding.net 接入到 CDN 上所以会解析多个不同的 host ip The authenticity of host ‘git.coding.net (61.146.73.68)’ can not be established. RSA key fingerprint is 98:ab:2b:30:60:00:82:86:bb:85:db:87:22:c4:4f:b1. Are you sure you want to continue connecting (yes/no)? yes Warning: Permanently added ‘git.coding.net,61.146.73.68’ (RSA) to the list of kn own hosts.</span><br><span class="line"></span><br><span class="line">Enter passphrase for key ‘/c/Users/Yuankai/.ssh/id_rsa’: Coding.net Tips : [ Hello Kyle_lyk! You have connected to Coding.net by SSH successfully! ]</span><br></pre></td></tr></table></figure>
<p>接下来就可以用git操作仓库了，是使用SourceTree非常方便</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/27/spark-1.6.0安装/" itemprop="url">
                  spark-1.6.0安装
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-27T12:52:59+08:00" content="2016-10-27">
              2016-10-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/大数据/" itemprop="url" rel="index">
                    <span itemprop="name">大数据</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/27/spark-1.6.0安装/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/27/spark-1.6.0安装/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>已安装Hadoop2.7.2的三节点集群</p>
</blockquote>
<h3 id="安装Scala"><a href="#安装Scala" class="headerlink" title="安装Scala"></a>安装Scala</h3><ol>
<li>下载scala-2.11.7.tgz</li>
<li><p>解压Scala</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zxvf scala-2.11.7.tgz -C ~/cloud/</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export  SCALA_HOME=/home/ubuntu/cloud/scala-2.11.7</span><br><span class="line">export PATH = $PATH:$SCALA_HOME/bin</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala -version</span><br><span class="line">Scala code runner version 2.11.7 -- Copyright 2002-2013, LAMP/EPFL</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置到每台节点</p>
</li>
</ol>
<h3 id="安装Spark"><a href="#安装Spark" class="headerlink" title="安装Spark"></a>安装Spark</h3><p>#Spark<br>export SPARK_HOME=/home/ubuntu/cloud/spark-1.6.0<br>export PATH=$PATH:$SPARK_HOME/bin</p>
<p>export JAVA_HOME=/usr/java/jdk1.8.0_91<br>export SPARK_MASTER_IP=10.0.0.7</p>
<p>#export SPARK_WORKER_MEMORY=2g<br>export HADOOP_CONF_DIR=${HADOOP_HOME}/etc/hadoop</p>
<p>slave1<br>slave2</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/18/name node is in safe mode/" itemprop="url">
                  name node is in safe mode问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-18T21:56:09+08:00" content="2016-10-18">
              2016-10-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/大数据/" itemprop="url" rel="index">
                    <span itemprop="name">大数据</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/18/name node is in safe mode/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/18/name node is in safe mode/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="name-node-is-in-safe-mode"><a href="#name-node-is-in-safe-mode" class="headerlink" title="name node is in safe mode"></a>name node is in safe mode</h3><p>问题： 向hdfs put数据的时候，导致了 name node is in safe mode，然后使用 Hadoop dfsadmin -safemode leave 后， 解除了安全模式。可是再次使用hdfs put或rm数据，仍旧导致name node 进入安全模式。</p>
<p>答案：分析了一下，问题是namenode所在机器的硬盘满了。因此即使使用了 hadoop dfsadmin -safemode leave 之后， 仍旧不能使用hdfs。</p>
<h4 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h4><ol>
<li>删除namenode所在机器的一些数据（本地数据）</li>
<li>结束安全模式   hadoop dfsadmin -safemode leave </li>
<li>可以正常使用hdfs了</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/18/LinkedHashMap和TreeMap的区别/" itemprop="url">
                  LinkedHashMap和TreeMap的区别
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-18T21:53:44+08:00" content="2016-10-18">
              2016-10-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/18/LinkedHashMap和TreeMap的区别/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/18/LinkedHashMap和TreeMap的区别/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="LinkedHashMap和TreeMap的区别"><a href="#LinkedHashMap和TreeMap的区别" class="headerlink" title="LinkedHashMap和TreeMap的区别"></a>LinkedHashMap和TreeMap的区别</h3><p>首先2个都是map，所以用key取值肯定是没区别的，区别在于用Iterator遍历的时候<br>LinkedHashMap保存了记录的插入顺序，先插入的先遍历到<br>TreeMap默认是按升序排，也可以指定排序的比较器。遍历的时候按升序遍历。<br>例如：a是LinkedHashMap，b是TreeMap。<br>a.put(“2”,”ab”);<br>a.put(“1”,”bc”);<br>b.put(“2”,”ab”);<br>b.put(“1”,”bc”);</p>
<p>那么遍历a的时候，先遍历到key是2的，因为2先放进去。<br>遍历b的时候，先遍历到“1”，因为按顺序是先1后2</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/21/HDUACM1200/" itemprop="url">
                  HDUACM1200
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-21T15:00:56+08:00" content="2016-09-21">
              2016-09-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/21/HDUACM1200/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/21/HDUACM1200/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">To and Fro</span><br><span class="line"></span><br><span class="line">Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 65536/32768 K (Java/Others)</span><br><span class="line">Total Submission(s): 6390    Accepted Submission(s): 4389</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Problem Description</span><br><span class="line">Mo and Larry have devised a way of encrypting messages. They first decide secretly on the number of columns and write the message (letters only) down the columns, padding with extra random letters so as to make a rectangular array of letters. For example, if the message is “There’s no place like home on a snowy night” and there are five columns, Mo would write down</span><br><span class="line"></span><br><span class="line">t o i o y</span><br><span class="line">h p k n n</span><br><span class="line">e l e a i</span><br><span class="line">r a h s g</span><br><span class="line">e c o n h</span><br><span class="line">s e m o t</span><br><span class="line">n l e w x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Note that Mo includes only letters and writes them all in lower case. In this example, Mo used the character ‘x’ to pad the message out to make a rectangle, although he could have used any letter.</span><br><span class="line"></span><br><span class="line">Mo then sends the message to Larry by writing the letters in each row, alternating left-to-right and right-to-left. So, the above would be encrypted as</span><br><span class="line"></span><br><span class="line">toioynnkpheleaigshareconhtomesnlewx</span><br><span class="line"></span><br><span class="line">Your job is to recover for Larry the original message (along with any extra padding letters) from the encrypted one.</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Input</span><br><span class="line">There will be multiple input sets. Input for each set will consist of two lines. The first line will contain an integer in the range 2. . . 20 indicating the number of columns used. The next line is a string of up to 200 lower case letters. The last input set is followed by a line containing a single 0, indicating end of input.</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Output</span><br><span class="line">Each input set should generate one line of output, giving the original plaintext message, with no spaces.</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Sample Input</span><br><span class="line">5</span><br><span class="line">toioynnkpheleaigshareconhtomesnlewx</span><br><span class="line">3</span><br><span class="line">ttyohhieneesiaabss</span><br><span class="line">0</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Sample Output</span><br><span class="line">theresnoplacelikehomeonasnowynightx</span><br><span class="line">thisistheeasyoneab</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Source</span><br><span class="line">East Central North America 2004</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Recommend</span><br><span class="line">Ignatius.L   |   We have carefully selected several similar problems for you:  1196 1073 1161 1113 1256</span><br></pre></td></tr></table></figure>
<h3 id="解答："><a href="#解答：" class="headerlink" title="解答："></a>解答：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">package hdu;</span><br><span class="line"></span><br><span class="line">import java.util.Scanner;</span><br><span class="line">/**</span><br><span class="line"> * 做的时候没看清楚  直接把蛇形输出做了正序的转换，然后才进行二维数组存储，多了个步骤</span><br><span class="line"> * @author Skye</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class Main &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line"></span><br><span class="line">		Scanner sc = new Scanner(System.in);</span><br><span class="line">		int col = sc.nextInt();</span><br><span class="line">		String message = null;</span><br><span class="line">		int rowNum,row = 0;</span><br><span class="line">		StringBuffer result = new StringBuffer();</span><br><span class="line">		char[] stringArr = null;</span><br><span class="line">		StringBuffer tmpString = new StringBuffer();</span><br><span class="line">		char[] tmpChar = null;</span><br><span class="line">		boolean isChange = false;</span><br><span class="line">		while (col != 0) &#123;</span><br><span class="line">			message = sc.next();</span><br><span class="line">			rowNum = message.length()/col;</span><br><span class="line">			// System.out.println(message);</span><br><span class="line">			stringArr = message.toCharArray();</span><br><span class="line">			// ttyohhieneesiaabss</span><br><span class="line">			for (int i = 0; i &lt; stringArr.length; i++) &#123;</span><br><span class="line">				// System.out.println(stringArr[i]);</span><br><span class="line">				if (i % col == 0) &#123; // 到行开头</span><br><span class="line">					row = i / col + 1; // 记录当前字母在第几行</span><br><span class="line">					if (row % 2 == 0) &#123;</span><br><span class="line">						isChange = true;</span><br><span class="line">					&#125; else &#123;</span><br><span class="line">						isChange = false;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				if (isChange == false) &#123;</span><br><span class="line">					</span><br><span class="line">					if (i != 0 &amp;&amp; i % col == 0) &#123;</span><br><span class="line">						//System.out.println(tmpString.toString());</span><br><span class="line">						tmpChar = tmpString.toString().toCharArray();</span><br><span class="line">						for (int j = tmpChar.length - 1; j &gt;= 0; j--) &#123;</span><br><span class="line">							result.append(tmpChar[j]);</span><br><span class="line">						&#125;</span><br><span class="line">						tmpString = new StringBuffer();</span><br><span class="line">					&#125;</span><br><span class="line">					result.append(stringArr[i]);</span><br><span class="line">				&#125; else &#123;</span><br><span class="line">					tmpString.append(stringArr[i]);</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">			if(isChange == true)&#123;</span><br><span class="line">				//System.out.println(tmpString.toString());</span><br><span class="line">				tmpChar = tmpString.toString().toCharArray();</span><br><span class="line">				for (int j = tmpChar.length - 1; j &gt;= 0; j--) &#123;</span><br><span class="line">					result.append(tmpChar[j]);</span><br><span class="line">				&#125;</span><br><span class="line">				tmpString = new StringBuffer();</span><br><span class="line">			&#125;</span><br><span class="line">			//System.out.println(result);</span><br><span class="line">			</span><br><span class="line">			char[][] charArr = new char[rowNum][col];</span><br><span class="line">			char[] resultChar = result.toString().toCharArray();</span><br><span class="line">			int count = 0;</span><br><span class="line">			for(int k = 0; k &lt; rowNum;k++)&#123;</span><br><span class="line">				for(int p = 0; p &lt; col;p++)&#123;</span><br><span class="line">					charArr[k][p] = resultChar[count++];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			StringBuffer resultFinal = new StringBuffer();</span><br><span class="line">			for(int k = 0; k &lt; col;k++)&#123;</span><br><span class="line">				for(int p = 0; p &lt; rowNum;p++)&#123;</span><br><span class="line">					resultFinal.append(charArr[p][k]);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(resultFinal);</span><br><span class="line">			resultFinal = new StringBuffer();</span><br><span class="line">			result = new StringBuffer();</span><br><span class="line">			col = sc.nextInt();</span><br><span class="line">		&#125;</span><br><span class="line">		sc.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="HDU另解："><a href="#HDU另解：" class="headerlink" title="HDU另解："></a>HDU另解：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import java.io.*;</span><br><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class Main</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		Scanner input = new Scanner(System.in);</span><br><span class="line">		while (input.hasNext())</span><br><span class="line">		&#123;</span><br><span class="line">			int n = input.nextInt();</span><br><span class="line">			if(n==0) break;</span><br><span class="line">			input.nextLine();</span><br><span class="line">			String str = input.nextLine();</span><br><span class="line">			char c1[] = str.toCharArray();                   // 把每个字符单个存起来</span><br><span class="line">			char c2[][] = new char[1010][1010];</span><br><span class="line">			int line = c1.length / n;                        //记录行数</span><br><span class="line">			int k = 0;                                      // 记录c1字符的位数</span><br><span class="line">			for (int i = 0; i &lt; line; i++)</span><br><span class="line">			&#123;</span><br><span class="line">				if (i % 2 == 1)</span><br><span class="line">				&#123;</span><br><span class="line">					for (int j = n - 1; j &gt;= 0; j--)</span><br><span class="line">					&#123;</span><br><span class="line">						c2[i][j] = c1[k++];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125; </span><br><span class="line">				else</span><br><span class="line">				&#123;</span><br><span class="line">					for (int j = 0; j &lt; n; j++)</span><br><span class="line">					&#123;</span><br><span class="line">						c2[i][j] = c1[k++];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			for (int j = 0; j &lt; n; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				for (int i = 0; i &lt; line; i++)</span><br><span class="line">				&#123;</span><br><span class="line">					System.out.print(c2[i][j]);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/31/Java Map 按key排序和按Value排序/" itemprop="url">
                  Java Map 按key排序和按Value排序
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-31T15:24:13+08:00" content="2016-08-31">
              2016-08-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/31/Java Map 按key排序和按Value排序/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/31/Java Map 按key排序和按Value排序/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>做推荐系统项目时，对标签评分需要对标签评分map进行排序.</p>
<h3 id="理论准备"><a href="#理论准备" class="headerlink" title="理论准备"></a>理论准备</h3><ul>
<li><p>Map是键值对的集合接口，它的实现类主要包括：HashMap,TreeMap,Hashtable以及LinkedHashMap等。</p>
</li>
<li><p>TreeMap：基于红黑树（Red-Black tree）的 NavigableMap 实现，该映射根据其键的自然顺序进行排序，或者根据创建映射时提供的 Comparator 进行排序，具体取决于使用的构造方法。<br>HashMap的值是没有顺序的，它是按照key的HashCode来实现的，对于这个无序的HashMap我们要怎么来实现排序呢？参照TreeMap的value排序。</p>
</li>
<li><p>Map.Entry返回Collections视图。</p>
</li>
</ul>
<h3 id="key排序"><a href="#key排序" class="headerlink" title="key排序"></a>key排序</h3><p>TreeMap默认是升序的，如果我们需要改变排序方式，则需要使用比较器：Comparator。Comparator可以对集合对象或者数组进行排序的比较器接口，实现该接口的public compare(T o1,To2)方法即可实现排序，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Comparator;</span><br><span class="line">import java.util.Iterator;</span><br><span class="line">import java.util.Map;</span><br><span class="line">import java.util.Set;</span><br><span class="line">import java.util.TreeMap;</span><br><span class="line">public class TreeMapTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Map&lt;String, String&gt; map = new TreeMap&lt;String, String&gt;(</span><br><span class="line">                new Comparator&lt;String&gt;() &#123;</span><br><span class="line">                    public int compare(String obj1, String obj2) &#123;</span><br><span class="line">                        // 降序排序</span><br><span class="line">                        return obj2.compareTo(obj1);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        map.put(&quot;b&quot;, &quot;ccccc&quot;);</span><br><span class="line">        map.put(&quot;d&quot;, &quot;aaaaa&quot;);</span><br><span class="line">        map.put(&quot;c&quot;, &quot;bbbbb&quot;);</span><br><span class="line">        map.put(&quot;a&quot;, &quot;ddddd&quot;);</span><br><span class="line">        </span><br><span class="line">        Set&lt;String&gt; keySet = map.keySet();</span><br><span class="line">        Iterator&lt;String&gt; iter = keySet.iterator();</span><br><span class="line">        while (iter.hasNext()) &#123;</span><br><span class="line">            String key = iter.next();</span><br><span class="line">            System.out.println(key + &quot;:&quot; + map.get(key));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">d:aaaaa</span><br><span class="line">c:bbbbb</span><br><span class="line">b:ccccc</span><br><span class="line">a:ddddd</span><br></pre></td></tr></table></figure></p>
<h3 id="value排序"><a href="#value排序" class="headerlink" title="value排序"></a>value排序</h3><p>上面例子是对根据TreeMap的key值来进行排序的，但是有时我们需要根据TreeMap的value来进行排序。对value排序我们就需要借助于Collections的sort(List<t> list, Comparator&lt;? super T&gt; c)方法，该方法根据指定比较器产生的顺序对指定列表进行排序。但是有一个前提条件，那就是所有的元素都必须能够根据所提供的比较器来进行比较，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.Comparator;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Map;</span><br><span class="line">import java.util.Map.Entry;</span><br><span class="line">import java.util.TreeMap;</span><br><span class="line">public class TreeMapTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Map&lt;String, String&gt; map = new TreeMap&lt;String, String&gt;();</span><br><span class="line">        map.put(&quot;a&quot;, &quot;ddddd&quot;);</span><br><span class="line">        map.put(&quot;c&quot;, &quot;bbbbb&quot;);</span><br><span class="line">        map.put(&quot;d&quot;, &quot;aaaaa&quot;);</span><br><span class="line">        map.put(&quot;b&quot;, &quot;ccccc&quot;);</span><br><span class="line">        </span><br><span class="line">        //这里将map.entrySet()转换成list</span><br><span class="line">        List&lt;Map.Entry&lt;String,String&gt;&gt; list = new ArrayList&lt;Map.Entry&lt;String,String&gt;&gt;(map.entrySet());</span><br><span class="line">        //然后通过比较器来实现排序</span><br><span class="line">        Collections.sort(list,new Comparator&lt;Map.Entry&lt;String,String&gt;&gt;() &#123;</span><br><span class="line">            //升序排序</span><br><span class="line">            public int compare(Entry&lt;String, String&gt; o1,</span><br><span class="line">                    Entry&lt;String, String&gt; o2) &#123;</span><br><span class="line">                return o1.getValue().compareTo(o2.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        for(Map.Entry&lt;String,String&gt; mapping:list)&#123; </span><br><span class="line">               System.out.println(mapping.getKey()+&quot;:&quot;+mapping.getValue()); </span><br><span class="line">          &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></t></p>
<p>运行结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">d:aaaaa</span><br><span class="line">c:bbbbb</span><br><span class="line">b:ccccc</span><br><span class="line">a:ddddd</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>参考：<a href="http://blog.csdn.net/xiaoyu714543065/article/details/38519817" target="_blank" rel="external">http://blog.csdn.net/xiaoyu714543065/article/details/38519817</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/29/Java BufferdReader读取文件乱码/" itemprop="url">
                  Java BufferdReader读取文件乱码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-29T21:23:57+08:00" content="2016-08-29">
              2016-08-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/29/Java BufferdReader读取文件乱码/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/29/Java BufferdReader读取文件乱码/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="javaBufferdReader读取文件乱码"><a href="#javaBufferdReader读取文件乱码" class="headerlink" title="javaBufferdReader读取文件乱码"></a>javaBufferdReader读取文件乱码</h3><p>以下为读取文件方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">private static void putIdGame()&#123;</span><br><span class="line">	</span><br><span class="line">	URL.setURLStreamHandlerFactory(new FsUrlStreamHandlerFactory());</span><br><span class="line">	int count = 0;</span><br><span class="line">	try &#123;</span><br><span class="line"></span><br><span class="line">		</span><br><span class="line">		URL url = new URL(HDFS + path);</span><br><span class="line">		InputStream gameList = url.openStream();</span><br><span class="line">		BufferedReader reader_url = new BufferedReader(new InputStreamReader(gameList,&quot;UTF-8&quot;));</span><br><span class="line">		String inString_RL = reader_url.readLine();</span><br><span class="line">		</span><br><span class="line">		while (inString_RL != null &amp;&amp; count &lt; 50) &#123;</span><br><span class="line">			int userId;</span><br><span class="line">			String[] str = inString_RL.split(&quot;,&quot;); </span><br><span class="line">			count ++;</span><br><span class="line">			map.put(str[1], str[0]);</span><br><span class="line">			System.out.println(str[0]);</span><br><span class="line">			inString_RL = reader_url.readLine();</span><br><span class="line">		&#125;</span><br><span class="line">		reader_url.close();</span><br><span class="line">	&#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">		System.out.println(&quot;未找文件！&quot;);</span><br><span class="line">	&#125; catch (IOException e1) &#123;</span><br><span class="line">		System.out.println(&quot;文件读写错误！&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在<code>InputStreamReader</code>中加入”UTF-8”即可</p>
<h3 id="Java读取文件时第一行出现乱码“？”问号"><a href="#Java读取文件时第一行出现乱码“？”问号" class="headerlink" title="Java读取文件时第一行出现乱码“？”问号"></a>Java读取文件时第一行出现乱码“？”问号</h3><p>在windows 环境下，使用java文件流读取文本文件时，会出现第一个字符为未知字符”?” ,其他字符完整。而且第一个字符显示为？但是用equals比对发现并非是”?”号,google之，了解到bom编码标记。使用 16进制打印输出结果：</p>
<p>只要出现该头的16进制编码为这种字符便可以断定该文本文件的编码方式了。</p>
<p>bom编码标记：</p>
<p>bom全称是：byte order mark，汉语意思是标记字节顺序码。只是出现在：unicode字符集中，只有unicode字符集，存储时候，要求指定编码，如果不指定，windows还会用默认的：ANSI读取。常见的bom头是：</p>
<p>  UTF-8 ║ EF BB BF<br>  UTF-16LE ║ FF FE (小尾）<br>  UTF-16BE ║ FE FF （大尾）<br>  UTF-32LE ║ FF FE 00 00<br>  UTF-32BE ║ 00 00 FE FF</p>
<h4 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h4><ol>
<li><p>工具将txt文件另存为UTF-8无BOM格式</p>
</li>
<li></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public String readerFile(InputStream in) throws IOException &#123;</span><br><span class="line">		StringBuffer strBuff = new StringBuffer();</span><br><span class="line">		String temp = null;</span><br><span class="line">		BufferedReader reader = new BufferedReader(new InputStreamReader(in,Charset.forName(&quot;utf-8&quot;)));</span><br><span class="line">		while ((temp = reader.readLine()) != null) &#123;</span><br><span class="line">			byte[] by = temp.getBytes();</span><br><span class="line">			String header = Integer.toHexString(by[0]).toUpperCase();</span><br><span class="line">			//判断是否拥有无法识别的字符</span><br><span class="line">			if (header.equalsIgnoreCase(&quot;FFFFFFEF&quot;) || header.equalsIgnoreCase(&quot;3F&quot;)) &#123;</span><br><span class="line">				strBuff.append(temp.substring(1) + &quot;\n&quot;);</span><br><span class="line">				continue;</span><br><span class="line">			&#125;</span><br><span class="line">			strBuff.append(temp + &quot;\n&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		reader.close();</span><br><span class="line">		in.close();</span><br><span class="line">		return strBuff.toString();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/26/HDFS工具类/" itemprop="url">
                  HDFS工具类
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-26T23:51:58+08:00" content="2016-08-26">
              2016-08-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/大数据/" itemprop="url" rel="index">
                    <span itemprop="name">大数据</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/26/HDFS工具类/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/26/HDFS工具类/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>花了点时间整理了验证一下在本地eclipse上操作HDFS的工具类，实现在本地通过API操作HDFS。</p>
<p>实现以下功能：</p>
<ul>
<li>ls </li>
<li>rmr</li>
<li>mkdir</li>
<li>copyFromLocal</li>
<li>cat</li>
<li>copyToLocal</li>
<li>创建一个新文件，并写入内容</li>
</ul>
<p>主要引用参考：</p>
<blockquote>
<p><a href="http://blog.fens.me/hadoop-hdfs-api/" target="_blank" rel="external">http://blog.fens.me/hadoop-hdfs-api/</a></p>
</blockquote>
<p>类如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line">package com.hdu.hdfs;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.net.URI;</span><br><span class="line"></span><br><span class="line">import org.apache.hadoop.conf.Configuration;</span><br><span class="line">import org.apache.hadoop.fs.BlockLocation;</span><br><span class="line">import org.apache.hadoop.fs.FSDataInputStream;</span><br><span class="line">import org.apache.hadoop.fs.FSDataOutputStream;</span><br><span class="line">import org.apache.hadoop.fs.FileStatus;</span><br><span class="line">import org.apache.hadoop.fs.FileSystem;</span><br><span class="line">import org.apache.hadoop.fs.Hdfs;</span><br><span class="line">import org.apache.hadoop.fs.Path;</span><br><span class="line">import org.apache.hadoop.hdfs.web.HsftpFileSystem;</span><br><span class="line">import org.apache.hadoop.io.IOUtils;</span><br><span class="line">import org.apache.hadoop.mapred.JobConf;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * HDFS工具类</span><br><span class="line"> * </span><br><span class="line"> * 实现功能：</span><br><span class="line"> * hadoop fs -ls / </span><br><span class="line"> * hadoop fs -mkdir /data </span><br><span class="line"> * hadoop fs -rmr /data/test.txt</span><br><span class="line"> * hadoop fs -copyFromLocal /test/test.txt /data </span><br><span class="line"> * hadoop fs -cat /data/test.txt</span><br><span class="line"> * hadoop fs -copyToLocal /data /test/test.txt </span><br><span class="line"> * 创建一个新文件，并写入内容  </span><br><span class="line"> * 重命名</span><br><span class="line"> * </span><br><span class="line"> * 需要导入以下路径的所有jar包： hadoop-2.7.2\share\hadoop\common</span><br><span class="line"> * hadoop-2.7.2\share\hadoop\common\lib hadoop-2.7.2\share\hadoop\hdfs</span><br><span class="line"> * hadoop-2.7.2\share\hadoop\hdfs\lib hadoop-2.7.2\share\hadoop\mapreduce</span><br><span class="line"> * </span><br><span class="line"> * </span><br><span class="line"> * @author Skye</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class HdfsDAO &#123;</span><br><span class="line"></span><br><span class="line">	// HDFS访问地址</span><br><span class="line">	private static final String HDFS = &quot;hdfs://192.168.1.111:9000/&quot;;</span><br><span class="line">	// hdfs路径</span><br><span class="line">	private String hdfsPath;</span><br><span class="line">	// Hadoop系统配置</span><br><span class="line">	private Configuration conf;</span><br><span class="line"></span><br><span class="line">	public HdfsDAO(Configuration conf) &#123;</span><br><span class="line">		this(HDFS, conf);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public HdfsDAO(String hdfs, Configuration conf) &#123;</span><br><span class="line">		this.hdfsPath = hdfs;</span><br><span class="line">		this.conf = conf;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// 启动函数</span><br><span class="line">	public static void main(String[] args) throws IOException &#123;</span><br><span class="line">		JobConf conf = config();</span><br><span class="line">		HdfsDAO hdfs = new HdfsDAO(conf);</span><br><span class="line">		// hdfs.mkdirs(&quot;/new&quot;);</span><br><span class="line">		// 可以同时建多级目录</span><br><span class="line">		// hdfs.mkdirs(&quot;/new/new3&quot;);</span><br><span class="line">		// hdfs.ls(&quot;/tuijian&quot;);</span><br><span class="line">		// hdfs.rmr(&quot;/new&quot;);</span><br><span class="line">		// 可用当前eclipse工作空间的相对路径和文件绝对路径 以及当前项目的路径不加&quot;/&quot;</span><br><span class="line">		// hdfs.copyFileToHdfs(&quot;data/hive笔记.md&quot;, &quot;/data&quot;);</span><br><span class="line">		// hdfs.copyFileToHdfs(&quot;/Xiaomi/MiFlashClean.cmd&quot;, &quot;/data&quot;);</span><br><span class="line">		// hdfs.copyFileToHdfs(&quot;E:/推荐系统/100万用户数据/user_pay&quot;, &quot;/data&quot;);</span><br><span class="line">		// hdfs.rmr(&quot;/data/MiFlashClean.cmd&quot;);</span><br><span class="line">		// hdfs.rmr(&quot;/data/user_pay_201606&quot;);</span><br><span class="line">		// hdfs.createFile(&quot;/new/createTest&quot;, &quot;1,英雄联盟&quot;);</span><br><span class="line">		// hdfs.download(&quot;/data/RecommendList&quot;, &quot;C:/Users/Skye/Desktop&quot;);</span><br><span class="line">		// hdfs.cat(&quot;/data/RecommendList1&quot;);</span><br><span class="line">		// hdfs.renameFile(&quot;/data/RecommendList&quot;, &quot;/data/RecommendListOld&quot;);</span><br><span class="line">		// hdfs.ls(&quot;/data&quot;);</span><br><span class="line">		//hdfs.findLocationOnHadoop(&quot;/data/RecommendListOld&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// 加载Hadoop配置文件</span><br><span class="line">	public static JobConf config() &#123;</span><br><span class="line">		JobConf conf = new JobConf(HdfsDAO.class);</span><br><span class="line">		conf.setJobName(&quot;HdfsDAO&quot;);</span><br><span class="line">		// conf.addResource(&quot;classpath:/hadoop/core-site.xml&quot;);</span><br><span class="line">		// conf.addResource(&quot;classpath:/hadoop/hdfs-site.xml&quot;);</span><br><span class="line">		// conf.addResource(&quot;classpath:/hadoop/mapred-site.xml&quot;);</span><br><span class="line">		return conf;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void mkdirs(String folder) throws IOException &#123;</span><br><span class="line">		Path path = new Path(folder);</span><br><span class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</span><br><span class="line">		if (!fs.exists(path)) &#123;</span><br><span class="line">			fs.mkdirs(path);</span><br><span class="line">			System.out.println(&quot;Create: &quot; + folder);</span><br><span class="line">		&#125;</span><br><span class="line">		fs.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void rmr(String folder) throws IOException &#123;</span><br><span class="line">		Path path = new Path(folder);</span><br><span class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</span><br><span class="line">		fs.deleteOnExit(path);</span><br><span class="line">		System.out.println(&quot;Delete: &quot; + folder);</span><br><span class="line">		fs.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void ls(String folder) throws IOException &#123;</span><br><span class="line">		Path path = new Path(folder);</span><br><span class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</span><br><span class="line">		FileStatus[] list = fs.listStatus(path);</span><br><span class="line">		System.out.println(&quot;ls: &quot; + folder);</span><br><span class="line">		System.out.println(&quot;==========================================================&quot;);</span><br><span class="line">		for (FileStatus f : list) &#123;</span><br><span class="line">			System.out.printf(&quot;name: %s, folder: %s, size: %d\n&quot;, f.getPath(), f.isDir(), f.getLen());</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(&quot;==========================================================&quot;);</span><br><span class="line">		fs.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void createFile(String file, String content) throws IOException &#123;</span><br><span class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</span><br><span class="line">		byte[] buff = content.getBytes();</span><br><span class="line">		FSDataOutputStream os = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			os = fs.create(new Path(file));</span><br><span class="line">			os.write(buff, 0, buff.length);</span><br><span class="line">			System.out.println(&quot;Create: &quot; + file);</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			if (os != null)</span><br><span class="line">				os.close();</span><br><span class="line">		&#125;</span><br><span class="line">		fs.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void copyFileToHdfs(String local, String remote) throws IOException &#123;</span><br><span class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</span><br><span class="line">		fs.copyFromLocalFile(new Path(local), new Path(remote));</span><br><span class="line">		System.out.println(&quot;copy from: &quot; + local + &quot; to &quot; + remote);</span><br><span class="line">		fs.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void download(String remote, String local) throws IOException &#123;</span><br><span class="line">		Path path = new Path(remote);</span><br><span class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</span><br><span class="line">		fs.copyToLocalFile(path, new Path(local));</span><br><span class="line">		System.out.println(&quot;download: from&quot; + remote + &quot; to &quot; + local);</span><br><span class="line">		fs.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void renameFile(String oldFileName, String newFileName) throws IOException &#123;</span><br><span class="line">		boolean isSuccess = true;</span><br><span class="line"></span><br><span class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</span><br><span class="line">		try &#123;</span><br><span class="line">			isSuccess = fs.rename(new Path(oldFileName), new Path(newFileName));</span><br><span class="line">		&#125; catch (IOException e) &#123;</span><br><span class="line">			isSuccess = false;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(isSuccess ? &quot;Rename success！ &quot; + oldFileName + &quot; to &quot; + newFileName</span><br><span class="line">				: &quot;Rename failed！&quot; + oldFileName + &quot; to &quot; + newFileName);</span><br><span class="line">		fs.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 查看某个文件在HDFS集群的位置</span><br><span class="line">	 * </span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 */</span><br><span class="line"></span><br><span class="line">	public void findLocationOnHadoop(String filePath) throws IOException &#123;</span><br><span class="line">		// Path targetFile=new Path(rootPath+&quot;user/hdfsupload/AA.txt&quot;);</span><br><span class="line">		// FileStatus fileStaus=coreSys.getFileStatus(targetFile);</span><br><span class="line">		Path targetFile = new Path(HDFS + filePath);</span><br><span class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</span><br><span class="line">		FileStatus fileStaus = fs.getFileStatus(targetFile);</span><br><span class="line">		BlockLocation[] bloLocations = fs.getFileBlockLocations(fileStaus, 0, fileStaus.getLen());</span><br><span class="line">		for (int i = 0; i &lt; bloLocations.length; i++) &#123;</span><br><span class="line">			System.out.println(&quot;block_&quot; + i + &quot;_location:&quot; + bloLocations[i].getHosts()[0]);</span><br><span class="line">		&#125;</span><br><span class="line">		fs.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void cat(String remoteFile) throws IOException &#123;</span><br><span class="line">		Path path = new Path(remoteFile);</span><br><span class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</span><br><span class="line">		FSDataInputStream fsdis = null;</span><br><span class="line">		System.out.println(&quot;cat: &quot; + remoteFile);</span><br><span class="line">		try &#123;</span><br><span class="line">			fsdis = fs.open(path);</span><br><span class="line">			IOUtils.copyBytes(fsdis, System.out, 4096, false);</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			IOUtils.closeStream(fsdis);</span><br><span class="line">			fs.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/22/Hive安装笔记/" itemprop="url">
                  Hive1.2.1安装笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-22T00:47:36+08:00" content="2016-08-22">
              2016-08-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/大数据/" itemprop="url" rel="index">
                    <span itemprop="name">大数据</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/22/Hive安装笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/22/Hive安装笔记/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ubuntu 16.04</span><br><span class="line">4台机器的Hadoop2.7.2集群</span><br><span class="line">Mysql安装在slave2中</span><br><span class="line">hive安装在master上</span><br></pre></td></tr></table></figure>
<h3 id="下载Hive"><a href="#下载Hive" class="headerlink" title="下载Hive"></a>下载Hive</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://mirrors.cnnic.cn/apache/hive/hive-1.2.1/apache-hive-1.2.1-bin.tar.gz</span><br><span class="line"># 解压</span><br><span class="line">$ tar -zxvf apache-hive-1.2.1-bin.tar.gz /home/ubuntu/cloud</span><br></pre></td></tr></table></figure>
<h3 id="配置Hive环境变量"><a href="#配置Hive环境变量" class="headerlink" title="配置Hive环境变量"></a>配置Hive环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/profile</span><br><span class="line"></span><br><span class="line">#添加</span><br><span class="line">export HIVE_HOME=/home/ubuntu/cloud/apache-hive-1.2.1-bin</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br><span class="line"></span><br><span class="line">$source /etc/profile</span><br></pre></td></tr></table></figure>
<h3 id="在Mysql中创建Hive用户"><a href="#在Mysql中创建Hive用户" class="headerlink" title="在Mysql中创建Hive用户"></a>在Mysql中创建Hive用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;CREATE USER &apos;hive&apos; IDENTIFIED BY &apos;hive&apos;;</span><br><span class="line">mysql&gt;GRANT ALL PRIVILEGES ON *.* TO &apos;hive&apos;@&apos;%&apos; IDENTIFIED BY &apos;hive&apos; WITH GRANT OPTION;</span><br><span class="line">mysql&gt;flush privileges;</span><br></pre></td></tr></table></figure>
<h3 id="创建Hive数据库"><a href="#创建Hive数据库" class="headerlink" title="创建Hive数据库"></a>创建Hive数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -uhive -phive</span><br><span class="line">mysql&gt;create database hive;</span><br></pre></td></tr></table></figure>
<h3 id="配置Hive"><a href="#配置Hive" class="headerlink" title="配置Hive"></a>配置Hive</h3><p>进入Hive的conf目录,找到<code>hive-default.xml.template</code>，cp份为<code>hive-site.xml</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ vim hive-site.xml</span><br><span class="line"># 删除configuration标签里的所有内容 添加如下内容</span><br><span class="line"></span><br><span class="line">	&lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;jdbc:mysql://slave2:3306/hive?createDatabaseIfNotExist=true&lt;/value&gt;</span><br><span class="line">        &lt;description&gt;JDBC connect string for a JDBC metastore&lt;/description&gt;    </span><br><span class="line">	&lt;/property&gt;   </span><br><span class="line">	&lt;property&gt; </span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt; </span><br><span class="line">        &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt; </span><br><span class="line">        &lt;description&gt;Driver class name for a JDBC metastore&lt;/description&gt;     </span><br><span class="line">	&lt;/property&gt;               </span><br><span class="line"> </span><br><span class="line">	&lt;property&gt; </span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hive&lt;/value&gt;</span><br><span class="line">        &lt;description&gt;username to use against metastore database&lt;/description&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;property&gt;  </span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hive&lt;/value&gt;</span><br><span class="line">        &lt;description&gt;password to use against metastore database&lt;/description&gt;  </span><br><span class="line">	&lt;/property&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="下载mysql-connector-java-5-1-32-bin-jar"><a href="#下载mysql-connector-java-5-1-32-bin-jar" class="headerlink" title="下载mysql-connector-java-5.1.32-bin.jar"></a>下载mysql-connector-java-5.1.32-bin.jar</h3><p>这里用5.1.32版本测试不报错，5.1.38会报warn</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#将连接jar包拷贝到Hive的lib目录</span><br><span class="line">$ cp mysql-connector-java-5.1.32-bin.jar /home/ubuntu/cloud/apache-hive-1.2.1-bin/lib/</span><br></pre></td></tr></table></figure>
<h3 id="若要装hive客户端可在客户端节点设置"><a href="#若要装hive客户端可在客户端节点设置" class="headerlink" title="若要装hive客户端可在客户端节点设置"></a>若要装hive客户端可在客户端节点设置</h3><p><code>vim hive-site.xml</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- thrift://&lt;host_name&gt;:&lt;port&gt; 默认端口是9083 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hive.metastore.uris&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;thrift://master:9083&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;Thrift uri for the remote metastore. Used by metastore client to connect to remote metastore.&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!--  hive表的默认存储路径 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;/user/hive/warehouse&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;location of default database for the warehouse&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="Hive启动"><a href="#Hive启动" class="headerlink" title="Hive启动"></a>Hive启动</h3><p>要启动metastore服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ hive --service metastore &amp;</span><br><span class="line">$ jps</span><br><span class="line">10288 RunJar  #多了一个进程</span><br><span class="line">9365 NameNode</span><br><span class="line">9670 SecondaryNameNode</span><br><span class="line">11096 Jps</span><br><span class="line">9944 NodeManager</span><br><span class="line">9838 ResourceManager</span><br><span class="line">9471 DataNode</span><br></pre></td></tr></table></figure></p>
<p>启动hive命令行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@master:~$ hive</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration in jar:file:/home/ubuntu/cloud/apache-hive-1.2.1-bin/lib/hive-common-1.2.1.jar!/hive-log4j.properties</span><br><span class="line">hive&gt; show tables;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.705 seconds</span><br></pre></td></tr></table></figure></p>
<p>启动hiveserver2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive --service hiveserver2 start &amp;</span><br></pre></td></tr></table></figure></p>
<h3 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h3><p>问题：创建表出先如下错误，删除表卡住</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. MetaException(message:For direct MetaStore DB connections, we don&apos;t support retries at the client level.</span><br></pre></td></tr></table></figure>
<p>初始化<br>注意：初始化之前先删除hdfs上的metastore,否则会出错<code>/user/hive/warehouse</code><br>在hive服务端输入以下命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">schematool -dbType mysql -initSchema</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/20/oracle启动dbstart出错或无反应的解决办法及自启动/" itemprop="url">
                  oracle启动dbstart出错或无反应的解决办法及自启动
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-20T09:51:07+08:00" content="2016-08-20">
              2016-08-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/20/oracle启动dbstart出错或无反应的解决办法及自启动/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/20/oracle启动dbstart出错或无反应的解决办法及自启动/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="问题一"><a href="#问题一" class="headerlink" title="问题一"></a>问题一</h3><p>启动dbstart 报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORACLE_HOME_LISTNER is not SET, unable to auto-start Oracle Net Listener Usage: /home/oracle/oracle11g/product/11.2.0/dbhome_1/bin/dbstart ORACLE_HOME</span><br></pre></td></tr></table></figure></p>
<p>linux成功安装Oracle后切换到Oracle用户后，直接使用<code>dbstart</code>($ORACLE_HOME/bin中)启动oracle数据库报错如上。原因是dbstart调用的tnslsnr脚本位置有错。解决办法：<br>打开该脚本：<code>vim $ORACLE_HOME/bin/dbstart</code><br>查找“ORACLE_HOME_LISTENER”变量的定义处，<br>修改<br><code>ORACLE_HOME_LISTENER＝$1</code><br>为<code>ORACLE_HOME_LISTENER＝$ORACLE_HOME</code></p>
<h3 id="问题二"><a href="#问题二" class="headerlink" title="问题二"></a>问题二</h3><p>启动<code>dbstart</code>没有反应，即不报错也不显示启动信息<br>原因是oracle的配置需要修改才能使用dbstart启动对应的数据实例。<br>解决办法：</p>
<p><code>sudo vim /etc/oratab</code><br>将<code>orcl:/home/oracle/oracle11g/product/11.2.0/dbhome_1:N</code>改为<code>orcl:/home/oracle/oracle11g/product/11.2.0/dbhome_1:Y</code></p>
<h3 id="问题三"><a href="#问题三" class="headerlink" title="问题三"></a>问题三</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;dbstart</span><br><span class="line">Can&apos;t find init file for Database &quot;orcl&quot;.</span><br><span class="line"></span><br><span class="line">Database &quot;orcl&quot; NOT started.</span><br></pre></td></tr></table></figure>
<p>原因就是没有找到init文件 我的数据库实例是orcl<br>这个文件<code>在$ORACLE_HOME/dbs/</code>目录下<br><code>cd $ORACLE_HOME/dbs</code><br>解决办法就是建立一个initorcl.ora的软连接就可以了<br><code>ln -s spfileego.ora initorcl.ora</code></p>
<h3 id="Oracle自启动"><a href="#Oracle自启动" class="headerlink" title="Oracle自启动"></a>Oracle自启动</h3><p>创建开机自动启动数据库的脚本<br>开一个普通的字符终端连接到UbuntuServer，运行如下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># vi /etc/init.d/Oracledb</span><br><span class="line">文件内容如下：</span><br><span class="line">#!/bin/bash</span><br><span class="line">#</span><br><span class="line"># /etc/init.d/oracledb</span><br><span class="line">#</span><br><span class="line"># Run-level Startup script for the Oracle Instance, Listener, and</span><br><span class="line"># Web Interface</span><br><span class="line"></span><br><span class="line">export ORACLE_HOME=/home/oracle/oracle11g/product/11.2.0/dbhome_1</span><br><span class="line">export ORACLE_SID=orcl</span><br><span class="line">export PATH=$ORACLE_HOME/bin:$PATH</span><br><span class="line"></span><br><span class="line">ORA_OWNR=&quot;oracle&quot;</span><br><span class="line"># if the executables do not exist -- display error</span><br><span class="line">if [ ! -f $ORACLE_HOME/bin/dbstart -o ! -d $ORACLE_HOME ]</span><br><span class="line">then</span><br><span class="line">echo &quot;Oracle startup: cannot start&quot;</span><br><span class="line">exit 1</span><br><span class="line">fi</span><br><span class="line"># depending on parameter -- startup, shutdown, restart</span><br><span class="line"># of the instance and listener or usage display</span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">start)</span><br><span class="line"># Oracle listener and instance startup</span><br><span class="line">echo -n &quot;Starting Oracle: &quot;</span><br><span class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/lsnrctl start&quot;</span><br><span class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/dbstart&quot;</span><br><span class="line">touch /var/lock/oracle</span><br><span class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/emctl start dbconsole&quot;</span><br><span class="line">echo &quot;OK&quot;</span><br><span class="line">;;</span><br><span class="line">stop)</span><br><span class="line"># Oracle listener and instance shutdown</span><br><span class="line">echo -n &quot;Shutdown Oracle: &quot;</span><br><span class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/lsnrctl stop&quot;</span><br><span class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/dbshut&quot;</span><br><span class="line">rm -f /var/lock/oracle</span><br><span class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/emctl stop dbconsole&quot;</span><br><span class="line">echo &quot;OK&quot;</span><br><span class="line">;;</span><br><span class="line">reload|restart)</span><br><span class="line">$0 stop</span><br><span class="line">$0 start</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">echo &quot;Usage: `basename $0` start|stop|restart|reload&quot;</span><br><span class="line">exit 1</span><br><span class="line">esac</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure></p>
<p>再运行如下命令设置权限，并放到启动脚本中去：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># chmod 755 /etc/init.d/Oracledb</span><br><span class="line"># update-rc.d Oracledb defaults 99</span><br></pre></td></tr></table></figure></p>
<p>最后：<br><code># vi /etc/oratab</code><br>把文件中的N改成Y，即”orcl:/opt/oracle/product/db:N”修改为”orcl:/opt/oracle/product/db:Y”。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Skye" />
          <p class="site-author-name" itemprop="name">Skye</p>
          <p class="site-description motion-element" itemprop="description">学习总结 思想感悟</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">37</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/1811544100" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/Skyexu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Skye</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"skyexu"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  






  
  
  

  

  

</body>
</html>
