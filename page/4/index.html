<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="学习总结 思想感悟">
<meta property="og:type" content="website">
<meta property="og:title" content="Skye&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Skye&#39;s Blog">
<meta property="og:description" content="学习总结 思想感悟">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Skye&#39;s Blog">
<meta name="twitter:description" content="学习总结 思想感悟">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/4/"/>

  <title> Skye's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?0ad3004c649d5e3dfe7d01df4a20ad3f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Skye's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Forever youthful,forever weeping</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/27/spark-1.6.0安装/" itemprop="url">
                  spark-1.6.0安装
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-27T12:52:59+08:00" content="2016-10-27">
              2016-10-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/大数据/" itemprop="url" rel="index">
                    <span itemprop="name">大数据</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/27/spark-1.6.0安装/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/27/spark-1.6.0安装/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/10/27/spark-1.6.0安装/" class="leancloud_visitors" data-flag-title="spark-1.6.0安装">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>已安装Hadoop2.7.2的三节点集群</p>
</blockquote>
<h3 id="安装Scala"><a href="#安装Scala" class="headerlink" title="安装Scala"></a>安装Scala</h3><ol>
<li>下载scala-2.11.7.tgz</li>
<li><p>解压Scala</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -zxvf scala-2.11.7.tgz -C ~/cloud/</div></pre></td></tr></table></figure>
</li>
<li><p>配置环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export  SCALA_HOME=/home/ubuntu/cloud/scala-2.11.7</div><div class="line">export PATH = $PATH:$SCALA_HOME/bin</div></pre></td></tr></table></figure>
</li>
<li><p>测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">scala -version</div><div class="line">Scala code runner version 2.11.7 -- Copyright 2002-2013, LAMP/EPFL</div></pre></td></tr></table></figure>
</li>
<li><p>配置到每台节点</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/10/27/spark-1.6.0安装/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/18/name node is in safe mode/" itemprop="url">
                  name node is in safe mode问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-18T21:56:09+08:00" content="2016-10-18">
              2016-10-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/大数据/" itemprop="url" rel="index">
                    <span itemprop="name">大数据</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/18/name node is in safe mode/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/18/name node is in safe mode/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/10/18/name node is in safe mode/" class="leancloud_visitors" data-flag-title="name node is in safe mode问题">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="name-node-is-in-safe-mode"><a href="#name-node-is-in-safe-mode" class="headerlink" title="name node is in safe mode"></a>name node is in safe mode</h3><p>问题： 向hdfs put数据的时候，导致了 name node is in safe mode，然后使用 Hadoop dfsadmin -safemode leave 后， 解除了安全模式。可是再次使用hdfs put或rm数据，仍旧导致name node 进入安全模式。</p>
<p>答案：分析了一下，问题是namenode所在机器的硬盘满了。因此即使使用了 hadoop dfsadmin -safemode leave 之后， 仍旧不能使用hdfs。</p>
<h4 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h4><ol>
<li>删除namenode所在机器的一些数据（本地数据）</li>
<li>结束安全模式   hadoop dfsadmin -safemode leave </li>
<li>可以正常使用hdfs了</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/18/LinkedHashMap和TreeMap的区别/" itemprop="url">
                  LinkedHashMap和TreeMap的区别
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-18T21:53:44+08:00" content="2016-10-18">
              2016-10-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/18/LinkedHashMap和TreeMap的区别/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/18/LinkedHashMap和TreeMap的区别/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/10/18/LinkedHashMap和TreeMap的区别/" class="leancloud_visitors" data-flag-title="LinkedHashMap和TreeMap的区别">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="LinkedHashMap和TreeMap的区别"><a href="#LinkedHashMap和TreeMap的区别" class="headerlink" title="LinkedHashMap和TreeMap的区别"></a>LinkedHashMap和TreeMap的区别</h3><p>首先2个都是map，所以用key取值肯定是没区别的，区别在于用Iterator遍历的时候<br>LinkedHashMap保存了记录的插入顺序，先插入的先遍历到<br>TreeMap默认是按升序排，也可以指定排序的比较器。遍历的时候按升序遍历。<br>例如：a是LinkedHashMap，b是TreeMap。<br>a.put(“2”,”ab”);<br>a.put(“1”,”bc”);<br>b.put(“2”,”ab”);<br>b.put(“1”,”bc”);</p>
<p>那么遍历a的时候，先遍历到key是2的，因为2先放进去。<br>遍历b的时候，先遍历到“1”，因为按顺序是先1后2</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/21/HDUACM1200/" itemprop="url">
                  HDUACM1200
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-21T15:00:56+08:00" content="2016-09-21">
              2016-09-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/21/HDUACM1200/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/21/HDUACM1200/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/09/21/HDUACM1200/" class="leancloud_visitors" data-flag-title="HDUACM1200">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">To and Fro</div><div class="line"></div><div class="line">Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 65536/32768 K (Java/Others)</div><div class="line">Total Submission(s): 6390    Accepted Submission(s): 4389</div><div class="line"></div><div class="line"></div><div class="line">Problem Description</div><div class="line">Mo and Larry have devised a way of encrypting messages. They first decide secretly on the number of columns and write the message (letters only) down the columns, padding with extra random letters so as to make a rectangular array of letters. For example, if the message is “There’s no place like home on a snowy night” and there are five columns, Mo would write down</div><div class="line"></div><div class="line">t o i o y</div><div class="line">h p k n n</div><div class="line">e l e a i</div><div class="line">r a h s g</div><div class="line">e c o n h</div><div class="line">s e m o t</div><div class="line">n l e w x</div><div class="line"></div><div class="line"></div><div class="line">Note that Mo includes only letters and writes them all in lower case. In this example, Mo used the character ‘x’ to pad the message out to make a rectangle, although he could have used any letter.</div><div class="line"></div><div class="line">Mo then sends the message to Larry by writing the letters in each row, alternating left-to-right and right-to-left. So, the above would be encrypted as</div><div class="line"></div><div class="line">toioynnkpheleaigshareconhtomesnlewx</div><div class="line"></div><div class="line">Your job is to recover for Larry the original message (along with any extra padding letters) from the encrypted one.</div><div class="line"> </div><div class="line"></div><div class="line">Input</div><div class="line">There will be multiple input sets. Input for each set will consist of two lines. The first line will contain an integer in the range 2. . . 20 indicating the number of columns used. The next line is a string of up to 200 lower case letters. The last input set is followed by a line containing a single 0, indicating end of input.</div><div class="line"> </div><div class="line"></div><div class="line">Output</div><div class="line">Each input set should generate one line of output, giving the original plaintext message, with no spaces.</div><div class="line"> </div><div class="line"></div><div class="line">Sample Input</div><div class="line">5</div><div class="line">toioynnkpheleaigshareconhtomesnlewx</div><div class="line">3</div><div class="line">ttyohhieneesiaabss</div><div class="line">0</div><div class="line"> </div><div class="line"></div><div class="line">Sample Output</div><div class="line">theresnoplacelikehomeonasnowynightx</div><div class="line">thisistheeasyoneab</div><div class="line"> </div><div class="line"></div><div class="line">Source</div><div class="line">East Central North America 2004</div><div class="line"> </div><div class="line"></div><div class="line">Recommend</div><div class="line">Ignatius.L   |   We have carefully selected several similar problems for you:  1196 1073 1161 1113 1256</div></pre></td></tr></table></figure>
<h3 id="解答："><a href="#解答：" class="headerlink" title="解答："></a>解答：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line">package hdu;</div><div class="line"></div><div class="line">import java.util.Scanner;</div><div class="line">/**</div><div class="line"> * 做的时候没看清楚  直接把蛇形输出做了正序的转换，然后才进行二维数组存储，多了个步骤</div><div class="line"> * @author Skye</div><div class="line"> *</div><div class="line"> */</div><div class="line">public class Main &#123;</div><div class="line"></div><div class="line">	public static void main(String[] args) &#123;</div><div class="line">		// TODO Auto-generated method stub</div><div class="line"></div><div class="line">		Scanner sc = new Scanner(System.in);</div><div class="line">		int col = sc.nextInt();</div><div class="line">		String message = null;</div><div class="line">		int rowNum,row = 0;</div><div class="line">		StringBuffer result = new StringBuffer();</div><div class="line">		char[] stringArr = null;</div><div class="line">		StringBuffer tmpString = new StringBuffer();</div><div class="line">		char[] tmpChar = null;</div><div class="line">		boolean isChange = false;</div><div class="line">		while (col != 0) &#123;</div><div class="line">			message = sc.next();</div><div class="line">			rowNum = message.length()/col;</div><div class="line">			// System.out.println(message);</div><div class="line">			stringArr = message.toCharArray();</div><div class="line">			// ttyohhieneesiaabss</div><div class="line">			for (int i = 0; i &lt; stringArr.length; i++) &#123;</div><div class="line">				// System.out.println(stringArr[i]);</div><div class="line">				if (i % col == 0) &#123; // 到行开头</div><div class="line">					row = i / col + 1; // 记录当前字母在第几行</div><div class="line">					if (row % 2 == 0) &#123;</div><div class="line">						isChange = true;</div><div class="line">					&#125; else &#123;</div><div class="line">						isChange = false;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				if (isChange == false) &#123;</div><div class="line">					</div><div class="line">					if (i != 0 &amp;&amp; i % col == 0) &#123;</div><div class="line">						//System.out.println(tmpString.toString());</div><div class="line">						tmpChar = tmpString.toString().toCharArray();</div><div class="line">						for (int j = tmpChar.length - 1; j &gt;= 0; j--) &#123;</div><div class="line">							result.append(tmpChar[j]);</div><div class="line">						&#125;</div><div class="line">						tmpString = new StringBuffer();</div><div class="line">					&#125;</div><div class="line">					result.append(stringArr[i]);</div><div class="line">				&#125; else &#123;</div><div class="line">					tmpString.append(stringArr[i]);</div><div class="line">				&#125;</div><div class="line"></div><div class="line">			&#125;</div><div class="line">			if(isChange == true)&#123;</div><div class="line">				//System.out.println(tmpString.toString());</div><div class="line">				tmpChar = tmpString.toString().toCharArray();</div><div class="line">				for (int j = tmpChar.length - 1; j &gt;= 0; j--) &#123;</div><div class="line">					result.append(tmpChar[j]);</div><div class="line">				&#125;</div><div class="line">				tmpString = new StringBuffer();</div><div class="line">			&#125;</div><div class="line">			//System.out.println(result);</div><div class="line">			</div><div class="line">			char[][] charArr = new char[rowNum][col];</div><div class="line">			char[] resultChar = result.toString().toCharArray();</div><div class="line">			int count = 0;</div><div class="line">			for(int k = 0; k &lt; rowNum;k++)&#123;</div><div class="line">				for(int p = 0; p &lt; col;p++)&#123;</div><div class="line">					charArr[k][p] = resultChar[count++];</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			StringBuffer resultFinal = new StringBuffer();</div><div class="line">			for(int k = 0; k &lt; col;k++)&#123;</div><div class="line">				for(int p = 0; p &lt; rowNum;p++)&#123;</div><div class="line">					resultFinal.append(charArr[p][k]);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			System.out.println(resultFinal);</div><div class="line">			resultFinal = new StringBuffer();</div><div class="line">			result = new StringBuffer();</div><div class="line">			col = sc.nextInt();</div><div class="line">		&#125;</div><div class="line">		sc.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="HDU另解："><a href="#HDU另解：" class="headerlink" title="HDU另解："></a>HDU另解：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">import java.io.*;</div><div class="line">import java.util.*;</div><div class="line"></div><div class="line">public class Main</div><div class="line">&#123;</div><div class="line"></div><div class="line">	public static void main(String[] args)</div><div class="line">	&#123;</div><div class="line">		Scanner input = new Scanner(System.in);</div><div class="line">		while (input.hasNext())</div><div class="line">		&#123;</div><div class="line">			int n = input.nextInt();</div><div class="line">			if(n==0) break;</div><div class="line">			input.nextLine();</div><div class="line">			String str = input.nextLine();</div><div class="line">			char c1[] = str.toCharArray();                   // 把每个字符单个存起来</div><div class="line">			char c2[][] = new char[1010][1010];</div><div class="line">			int line = c1.length / n;                        //记录行数</div><div class="line">			int k = 0;                                      // 记录c1字符的位数</div><div class="line">			for (int i = 0; i &lt; line; i++)</div><div class="line">			&#123;</div><div class="line">				if (i % 2 == 1)</div><div class="line">				&#123;</div><div class="line">					for (int j = n - 1; j &gt;= 0; j--)</div><div class="line">					&#123;</div><div class="line">						c2[i][j] = c1[k++];</div><div class="line">					&#125;</div><div class="line">				&#125; </div><div class="line">				else</div><div class="line">				&#123;</div><div class="line">					for (int j = 0; j &lt; n; j++)</div><div class="line">					&#123;</div><div class="line">						c2[i][j] = c1[k++];</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			for (int j = 0; j &lt; n; j++)</div><div class="line">			&#123;</div><div class="line">				for (int i = 0; i &lt; line; i++)</div><div class="line">				&#123;</div><div class="line">					System.out.print(c2[i][j]);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			System.out.println();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/31/Java Map 按key排序和按Value排序/" itemprop="url">
                  Java Map 按key排序和按Value排序
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-31T15:24:13+08:00" content="2016-08-31">
              2016-08-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/31/Java Map 按key排序和按Value排序/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/31/Java Map 按key排序和按Value排序/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/31/Java Map 按key排序和按Value排序/" class="leancloud_visitors" data-flag-title="Java Map 按key排序和按Value排序">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>做推荐系统项目时，对标签评分需要对标签评分map进行排序.</p>
<h3 id="理论准备"><a href="#理论准备" class="headerlink" title="理论准备"></a>理论准备</h3><ul>
<li><p>Map是键值对的集合接口，它的实现类主要包括：HashMap,TreeMap,Hashtable以及LinkedHashMap等。</p>
</li>
<li><p>TreeMap：基于红黑树（Red-Black tree）的 NavigableMap 实现，该映射根据其键的自然顺序进行排序，或者根据创建映射时提供的 Comparator 进行排序，具体取决于使用的构造方法。<br>HashMap的值是没有顺序的，它是按照key的HashCode来实现的，对于这个无序的HashMap我们要怎么来实现排序呢？参照TreeMap的value排序。</p>
</li>
<li><p>Map.Entry返回Collections视图。</p>
</li>
</ul>
<h3 id="key排序"><a href="#key排序" class="headerlink" title="key排序"></a>key排序</h3><p>TreeMap默认是升序的，如果我们需要改变排序方式，则需要使用比较器：Comparator。Comparator可以对集合对象或者数组进行排序的比较器接口，实现该接口的public compare(T o1,To2)方法即可实现排序，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">import java.util.Comparator;</div><div class="line">import java.util.Iterator;</div><div class="line">import java.util.Map;</div><div class="line">import java.util.Set;</div><div class="line">import java.util.TreeMap;</div><div class="line">public class TreeMapTest &#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        Map&lt;String, String&gt; map = new TreeMap&lt;String, String&gt;(</div><div class="line">                new Comparator&lt;String&gt;() &#123;</div><div class="line">                    public int compare(String obj1, String obj2) &#123;</div><div class="line">                        // 降序排序</div><div class="line">                        return obj2.compareTo(obj1);</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">        map.put(&quot;b&quot;, &quot;ccccc&quot;);</div><div class="line">        map.put(&quot;d&quot;, &quot;aaaaa&quot;);</div><div class="line">        map.put(&quot;c&quot;, &quot;bbbbb&quot;);</div><div class="line">        map.put(&quot;a&quot;, &quot;ddddd&quot;);</div><div class="line">        </div><div class="line">        Set&lt;String&gt; keySet = map.keySet();</div><div class="line">        Iterator&lt;String&gt; iter = keySet.iterator();</div><div class="line">        while (iter.hasNext()) &#123;</div><div class="line">            String key = iter.next();</div><div class="line">            System.out.println(key + &quot;:&quot; + map.get(key));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">d:aaaaa</div><div class="line">c:bbbbb</div><div class="line">b:ccccc</div><div class="line">a:ddddd</div></pre></td></tr></table></figure></p>
<h3 id="value排序"><a href="#value排序" class="headerlink" title="value排序"></a>value排序</h3><p>上面例子是对根据TreeMap的key值来进行排序的，但是有时我们需要根据TreeMap的value来进行排序。对value排序我们就需要借助于Collections的sort(List<t> list, Comparator&lt;? super T&gt; c)方法，该方法根据指定比较器产生的顺序对指定列表进行排序。但是有一个前提条件，那就是所有的元素都必须能够根据所提供的比较器来进行比较，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.Collections;</div><div class="line">import java.util.Comparator;</div><div class="line">import java.util.List;</div><div class="line">import java.util.Map;</div><div class="line">import java.util.Map.Entry;</div><div class="line">import java.util.TreeMap;</div><div class="line">public class TreeMapTest &#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        Map&lt;String, String&gt; map = new TreeMap&lt;String, String&gt;();</div><div class="line">        map.put(&quot;a&quot;, &quot;ddddd&quot;);</div><div class="line">        map.put(&quot;c&quot;, &quot;bbbbb&quot;);</div><div class="line">        map.put(&quot;d&quot;, &quot;aaaaa&quot;);</div><div class="line">        map.put(&quot;b&quot;, &quot;ccccc&quot;);</div><div class="line">        </div><div class="line">        //这里将map.entrySet()转换成list</div><div class="line">        List&lt;Map.Entry&lt;String,String&gt;&gt; list = new ArrayList&lt;Map.Entry&lt;String,String&gt;&gt;(map.entrySet());</div><div class="line">        //然后通过比较器来实现排序</div><div class="line">        Collections.sort(list,new Comparator&lt;Map.Entry&lt;String,String&gt;&gt;() &#123;</div><div class="line">            //升序排序</div><div class="line">            public int compare(Entry&lt;String, String&gt; o1,</div><div class="line">                    Entry&lt;String, String&gt; o2) &#123;</div><div class="line">                return o1.getValue().compareTo(o2.getValue());</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        for(Map.Entry&lt;String,String&gt; mapping:list)&#123; </div><div class="line">               System.out.println(mapping.getKey()+&quot;:&quot;+mapping.getValue()); </div><div class="line">          &#125; </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></t></p>
<p>运行结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">d:aaaaa</div><div class="line">c:bbbbb</div><div class="line">b:ccccc</div><div class="line">a:ddddd</div></pre></td></tr></table></figure></p>
<blockquote>
<p>参考：<a href="http://blog.csdn.net/xiaoyu714543065/article/details/38519817" target="_blank" rel="external">http://blog.csdn.net/xiaoyu714543065/article/details/38519817</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/29/Java BufferdReader读取文件乱码/" itemprop="url">
                  Java BufferdReader读取文件乱码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-29T21:23:57+08:00" content="2016-08-29">
              2016-08-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/29/Java BufferdReader读取文件乱码/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/29/Java BufferdReader读取文件乱码/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/29/Java BufferdReader读取文件乱码/" class="leancloud_visitors" data-flag-title="Java BufferdReader读取文件乱码">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="javaBufferdReader读取文件乱码"><a href="#javaBufferdReader读取文件乱码" class="headerlink" title="javaBufferdReader读取文件乱码"></a>javaBufferdReader读取文件乱码</h3><p>以下为读取文件方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">private static void putIdGame()&#123;</div><div class="line">	</div><div class="line">	URL.setURLStreamHandlerFactory(new FsUrlStreamHandlerFactory());</div><div class="line">	int count = 0;</div><div class="line">	try &#123;</div><div class="line"></div><div class="line">		</div><div class="line">		URL url = new URL(HDFS + path);</div><div class="line">		InputStream gameList = url.openStream();</div><div class="line">		BufferedReader reader_url = new BufferedReader(new InputStreamReader(gameList,&quot;UTF-8&quot;));</div><div class="line">		String inString_RL = reader_url.readLine();</div><div class="line">		</div><div class="line">		while (inString_RL != null &amp;&amp; count &lt; 50) &#123;</div><div class="line">			int userId;</div><div class="line">			String[] str = inString_RL.split(&quot;,&quot;); </div><div class="line">			count ++;</div><div class="line">			map.put(str[1], str[0]);</div><div class="line">			System.out.println(str[0]);</div><div class="line">			inString_RL = reader_url.readLine();</div><div class="line">		&#125;</div><div class="line">		reader_url.close();</div><div class="line">	&#125; catch (FileNotFoundException e) &#123;</div><div class="line">		System.out.println(&quot;未找文件！&quot;);</div><div class="line">	&#125; catch (IOException e1) &#123;</div><div class="line">		System.out.println(&quot;文件读写错误！&quot;);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在<code>InputStreamReader</code>中加入”UTF-8”即可</p>
<h3 id="Java读取文件时第一行出现乱码“？”问号"><a href="#Java读取文件时第一行出现乱码“？”问号" class="headerlink" title="Java读取文件时第一行出现乱码“？”问号"></a>Java读取文件时第一行出现乱码“？”问号</h3><p>在windows 环境下，使用java文件流读取文本文件时，会出现第一个字符为未知字符”?” ,其他字符完整。而且第一个字符显示为？但是用equals比对发现并非是”?”号,google之，了解到bom编码标记。使用 16进制打印输出结果：</p>
<p>只要出现该头的16进制编码为这种字符便可以断定该文本文件的编码方式了。</p>
<p>bom编码标记：</p>
<p>bom全称是：byte order mark，汉语意思是标记字节顺序码。只是出现在：unicode字符集中，只有unicode字符集，存储时候，要求指定编码，如果不指定，windows还会用默认的：ANSI读取。常见的bom头是：</p>
<p>  UTF-8 ║ EF BB BF<br>  UTF-16LE ║ FF FE (小尾）<br>  UTF-16BE ║ FE FF （大尾）<br>  UTF-32LE ║ FF FE 00 00<br>  UTF-32BE ║ 00 00 FE FF</p>
<h4 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h4><ol>
<li><p>工具将txt文件另存为UTF-8无BOM格式</p>
</li>
<li></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">public String readerFile(InputStream in) throws IOException &#123;</div><div class="line">		StringBuffer strBuff = new StringBuffer();</div><div class="line">		String temp = null;</div><div class="line">		BufferedReader reader = new BufferedReader(new InputStreamReader(in,Charset.forName(&quot;utf-8&quot;)));</div><div class="line">		while ((temp = reader.readLine()) != null) &#123;</div><div class="line">			byte[] by = temp.getBytes();</div><div class="line">			String header = Integer.toHexString(by[0]).toUpperCase();</div><div class="line">			//判断是否拥有无法识别的字符</div><div class="line">			if (header.equalsIgnoreCase(&quot;FFFFFFEF&quot;) || header.equalsIgnoreCase(&quot;3F&quot;)) &#123;</div><div class="line">				strBuff.append(temp.substring(1) + &quot;\n&quot;);</div><div class="line">				continue;</div><div class="line">			&#125;</div><div class="line">			strBuff.append(temp + &quot;\n&quot;);</div><div class="line">		&#125;</div><div class="line">		reader.close();</div><div class="line">		in.close();</div><div class="line">		return strBuff.toString();</div><div class="line">	&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/26/HDFS工具类/" itemprop="url">
                  HDFS工具类
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-26T23:51:58+08:00" content="2016-08-26">
              2016-08-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/大数据/" itemprop="url" rel="index">
                    <span itemprop="name">大数据</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/26/HDFS工具类/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/26/HDFS工具类/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/26/HDFS工具类/" class="leancloud_visitors" data-flag-title="HDFS工具类">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>花了点时间整理了验证一下在本地eclipse上操作HDFS的工具类，实现在本地通过API操作HDFS。</p>
<p>实现以下功能：</p>
<ul>
<li>ls </li>
<li>rmr</li>
<li>mkdir</li>
<li>copyFromLocal</li>
<li>cat</li>
<li>copyToLocal</li>
<li>创建一个新文件，并写入内容</li>
</ul>
<p>主要引用参考：</p>
<blockquote>
<p><a href="http://blog.fens.me/hadoop-hdfs-api/" target="_blank" rel="external">http://blog.fens.me/hadoop-hdfs-api/</a></p>
</blockquote>
<p>类如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div></pre></td><td class="code"><pre><div class="line">package com.hdu.hdfs;</div><div class="line"></div><div class="line">import java.io.IOException;</div><div class="line">import java.net.URI;</div><div class="line"></div><div class="line">import org.apache.hadoop.conf.Configuration;</div><div class="line">import org.apache.hadoop.fs.BlockLocation;</div><div class="line">import org.apache.hadoop.fs.FSDataInputStream;</div><div class="line">import org.apache.hadoop.fs.FSDataOutputStream;</div><div class="line">import org.apache.hadoop.fs.FileStatus;</div><div class="line">import org.apache.hadoop.fs.FileSystem;</div><div class="line">import org.apache.hadoop.fs.Hdfs;</div><div class="line">import org.apache.hadoop.fs.Path;</div><div class="line">import org.apache.hadoop.hdfs.web.HsftpFileSystem;</div><div class="line">import org.apache.hadoop.io.IOUtils;</div><div class="line">import org.apache.hadoop.mapred.JobConf;</div><div class="line"></div><div class="line">/**</div><div class="line"> * HDFS工具类</div><div class="line"> * </div><div class="line"> * 实现功能：</div><div class="line"> * hadoop fs -ls / </div><div class="line"> * hadoop fs -mkdir /data </div><div class="line"> * hadoop fs -rmr /data/test.txt</div><div class="line"> * hadoop fs -copyFromLocal /test/test.txt /data </div><div class="line"> * hadoop fs -cat /data/test.txt</div><div class="line"> * hadoop fs -copyToLocal /data /test/test.txt </div><div class="line"> * 创建一个新文件，并写入内容  </div><div class="line"> * 重命名</div><div class="line"> * </div><div class="line"> * 需要导入以下路径的所有jar包： hadoop-2.7.2\share\hadoop\common</div><div class="line"> * hadoop-2.7.2\share\hadoop\common\lib hadoop-2.7.2\share\hadoop\hdfs</div><div class="line"> * hadoop-2.7.2\share\hadoop\hdfs\lib hadoop-2.7.2\share\hadoop\mapreduce</div><div class="line"> * </div><div class="line"> * </div><div class="line"> * @author Skye</div><div class="line"> *</div><div class="line"> */</div><div class="line">public class HdfsDAO &#123;</div><div class="line"></div><div class="line">	// HDFS访问地址</div><div class="line">	private static final String HDFS = &quot;hdfs://192.168.1.111:9000/&quot;;</div><div class="line">	// hdfs路径</div><div class="line">	private String hdfsPath;</div><div class="line">	// Hadoop系统配置</div><div class="line">	private Configuration conf;</div><div class="line"></div><div class="line">	public HdfsDAO(Configuration conf) &#123;</div><div class="line">		this(HDFS, conf);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public HdfsDAO(String hdfs, Configuration conf) &#123;</div><div class="line">		this.hdfsPath = hdfs;</div><div class="line">		this.conf = conf;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	// 启动函数</div><div class="line">	public static void main(String[] args) throws IOException &#123;</div><div class="line">		JobConf conf = config();</div><div class="line">		HdfsDAO hdfs = new HdfsDAO(conf);</div><div class="line">		// hdfs.mkdirs(&quot;/new&quot;);</div><div class="line">		// 可以同时建多级目录</div><div class="line">		// hdfs.mkdirs(&quot;/new/new3&quot;);</div><div class="line">		// hdfs.ls(&quot;/tuijian&quot;);</div><div class="line">		// hdfs.rmr(&quot;/new&quot;);</div><div class="line">		// 可用当前eclipse工作空间的相对路径和文件绝对路径 以及当前项目的路径不加&quot;/&quot;</div><div class="line">		// hdfs.copyFileToHdfs(&quot;data/hive笔记.md&quot;, &quot;/data&quot;);</div><div class="line">		// hdfs.copyFileToHdfs(&quot;/Xiaomi/MiFlashClean.cmd&quot;, &quot;/data&quot;);</div><div class="line">		// hdfs.copyFileToHdfs(&quot;E:/推荐系统/100万用户数据/user_pay&quot;, &quot;/data&quot;);</div><div class="line">		// hdfs.rmr(&quot;/data/MiFlashClean.cmd&quot;);</div><div class="line">		// hdfs.rmr(&quot;/data/user_pay_201606&quot;);</div><div class="line">		// hdfs.createFile(&quot;/new/createTest&quot;, &quot;1,英雄联盟&quot;);</div><div class="line">		// hdfs.download(&quot;/data/RecommendList&quot;, &quot;C:/Users/Skye/Desktop&quot;);</div><div class="line">		// hdfs.cat(&quot;/data/RecommendList1&quot;);</div><div class="line">		// hdfs.renameFile(&quot;/data/RecommendList&quot;, &quot;/data/RecommendListOld&quot;);</div><div class="line">		// hdfs.ls(&quot;/data&quot;);</div><div class="line">		//hdfs.findLocationOnHadoop(&quot;/data/RecommendListOld&quot;);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	// 加载Hadoop配置文件</div><div class="line">	public static JobConf config() &#123;</div><div class="line">		JobConf conf = new JobConf(HdfsDAO.class);</div><div class="line">		conf.setJobName(&quot;HdfsDAO&quot;);</div><div class="line">		// conf.addResource(&quot;classpath:/hadoop/core-site.xml&quot;);</div><div class="line">		// conf.addResource(&quot;classpath:/hadoop/hdfs-site.xml&quot;);</div><div class="line">		// conf.addResource(&quot;classpath:/hadoop/mapred-site.xml&quot;);</div><div class="line">		return conf;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void mkdirs(String folder) throws IOException &#123;</div><div class="line">		Path path = new Path(folder);</div><div class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</div><div class="line">		if (!fs.exists(path)) &#123;</div><div class="line">			fs.mkdirs(path);</div><div class="line">			System.out.println(&quot;Create: &quot; + folder);</div><div class="line">		&#125;</div><div class="line">		fs.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void rmr(String folder) throws IOException &#123;</div><div class="line">		Path path = new Path(folder);</div><div class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</div><div class="line">		fs.deleteOnExit(path);</div><div class="line">		System.out.println(&quot;Delete: &quot; + folder);</div><div class="line">		fs.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void ls(String folder) throws IOException &#123;</div><div class="line">		Path path = new Path(folder);</div><div class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</div><div class="line">		FileStatus[] list = fs.listStatus(path);</div><div class="line">		System.out.println(&quot;ls: &quot; + folder);</div><div class="line">		System.out.println(&quot;==========================================================&quot;);</div><div class="line">		for (FileStatus f : list) &#123;</div><div class="line">			System.out.printf(&quot;name: %s, folder: %s, size: %d\n&quot;, f.getPath(), f.isDir(), f.getLen());</div><div class="line">		&#125;</div><div class="line">		System.out.println(&quot;==========================================================&quot;);</div><div class="line">		fs.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void createFile(String file, String content) throws IOException &#123;</div><div class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</div><div class="line">		byte[] buff = content.getBytes();</div><div class="line">		FSDataOutputStream os = null;</div><div class="line">		try &#123;</div><div class="line">			os = fs.create(new Path(file));</div><div class="line">			os.write(buff, 0, buff.length);</div><div class="line">			System.out.println(&quot;Create: &quot; + file);</div><div class="line">		&#125; finally &#123;</div><div class="line">			if (os != null)</div><div class="line">				os.close();</div><div class="line">		&#125;</div><div class="line">		fs.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void copyFileToHdfs(String local, String remote) throws IOException &#123;</div><div class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</div><div class="line">		fs.copyFromLocalFile(new Path(local), new Path(remote));</div><div class="line">		System.out.println(&quot;copy from: &quot; + local + &quot; to &quot; + remote);</div><div class="line">		fs.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void download(String remote, String local) throws IOException &#123;</div><div class="line">		Path path = new Path(remote);</div><div class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</div><div class="line">		fs.copyToLocalFile(path, new Path(local));</div><div class="line">		System.out.println(&quot;download: from&quot; + remote + &quot; to &quot; + local);</div><div class="line">		fs.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void renameFile(String oldFileName, String newFileName) throws IOException &#123;</div><div class="line">		boolean isSuccess = true;</div><div class="line"></div><div class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</div><div class="line">		try &#123;</div><div class="line">			isSuccess = fs.rename(new Path(oldFileName), new Path(newFileName));</div><div class="line">		&#125; catch (IOException e) &#123;</div><div class="line">			isSuccess = false;</div><div class="line">		&#125;</div><div class="line">		System.out.println(isSuccess ? &quot;Rename success！ &quot; + oldFileName + &quot; to &quot; + newFileName</div><div class="line">				: &quot;Rename failed！&quot; + oldFileName + &quot; to &quot; + newFileName);</div><div class="line">		fs.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 查看某个文件在HDFS集群的位置</div><div class="line">	 * </div><div class="line">	 * @throws IOException</div><div class="line">	 */</div><div class="line"></div><div class="line">	public void findLocationOnHadoop(String filePath) throws IOException &#123;</div><div class="line">		// Path targetFile=new Path(rootPath+&quot;user/hdfsupload/AA.txt&quot;);</div><div class="line">		// FileStatus fileStaus=coreSys.getFileStatus(targetFile);</div><div class="line">		Path targetFile = new Path(HDFS + filePath);</div><div class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</div><div class="line">		FileStatus fileStaus = fs.getFileStatus(targetFile);</div><div class="line">		BlockLocation[] bloLocations = fs.getFileBlockLocations(fileStaus, 0, fileStaus.getLen());</div><div class="line">		for (int i = 0; i &lt; bloLocations.length; i++) &#123;</div><div class="line">			System.out.println(&quot;block_&quot; + i + &quot;_location:&quot; + bloLocations[i].getHosts()[0]);</div><div class="line">		&#125;</div><div class="line">		fs.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void cat(String remoteFile) throws IOException &#123;</div><div class="line">		Path path = new Path(remoteFile);</div><div class="line">		FileSystem fs = FileSystem.get(URI.create(hdfsPath), conf);</div><div class="line">		FSDataInputStream fsdis = null;</div><div class="line">		System.out.println(&quot;cat: &quot; + remoteFile);</div><div class="line">		try &#123;</div><div class="line">			fsdis = fs.open(path);</div><div class="line">			IOUtils.copyBytes(fsdis, System.out, 4096, false);</div><div class="line">		&#125; finally &#123;</div><div class="line">			IOUtils.closeStream(fsdis);</div><div class="line">			fs.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/22/Hive安装笔记/" itemprop="url">
                  Hive1.2.1安装笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-22T00:47:36+08:00" content="2016-08-22">
              2016-08-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/大数据/" itemprop="url" rel="index">
                    <span itemprop="name">大数据</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/22/Hive安装笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/22/Hive安装笔记/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/22/Hive安装笔记/" class="leancloud_visitors" data-flag-title="Hive1.2.1安装笔记">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ubuntu 16.04</div><div class="line">4台机器的Hadoop2.7.2集群</div><div class="line">Mysql安装在slave2中</div><div class="line">hive安装在master上</div></pre></td></tr></table></figure>
<h3 id="下载Hive"><a href="#下载Hive" class="headerlink" title="下载Hive"></a>下载Hive</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ wget http://mirrors.cnnic.cn/apache/hive/hive-1.2.1/apache-hive-1.2.1-bin.tar.gz</div><div class="line"># 解压</div><div class="line">$ tar -zxvf apache-hive-1.2.1-bin.tar.gz /home/ubuntu/cloud</div></pre></td></tr></table></figure>
<h3 id="配置Hive环境变量"><a href="#配置Hive环境变量" class="headerlink" title="配置Hive环境变量"></a>配置Hive环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ sudo vim /etc/profile</div><div class="line"></div><div class="line">#添加</div><div class="line">export HIVE_HOME=/home/ubuntu/cloud/apache-hive-1.2.1-bin</div><div class="line">export PATH=$PATH:$HIVE_HOME/bin</div><div class="line"></div><div class="line">$source /etc/profile</div></pre></td></tr></table></figure>
<h3 id="在Mysql中创建Hive用户"><a href="#在Mysql中创建Hive用户" class="headerlink" title="在Mysql中创建Hive用户"></a>在Mysql中创建Hive用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt;CREATE USER &apos;hive&apos; IDENTIFIED BY &apos;hive&apos;;</div><div class="line">mysql&gt;GRANT ALL PRIVILEGES ON *.* TO &apos;hive&apos;@&apos;%&apos; IDENTIFIED BY &apos;hive&apos; WITH GRANT OPTION;</div><div class="line">mysql&gt;flush privileges;</div></pre></td></tr></table></figure>
<h3 id="创建Hive数据库"><a href="#创建Hive数据库" class="headerlink" title="创建Hive数据库"></a>创建Hive数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mysql -uhive -phive</div><div class="line">mysql&gt;create database hive;</div></pre></td></tr></table></figure>
<h3 id="配置Hive"><a href="#配置Hive" class="headerlink" title="配置Hive"></a>配置Hive</h3><p>进入Hive的conf目录,找到<code>hive-default.xml.template</code>，cp份为<code>hive-site.xml</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">$ vim hive-site.xml</div><div class="line"># 删除configuration标签里的所有内容 添加如下内容</div><div class="line"></div><div class="line">	&lt;property&gt;</div><div class="line">        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</div><div class="line">        &lt;value&gt;jdbc:mysql://slave2:3306/hive?createDatabaseIfNotExist=true&lt;/value&gt;</div><div class="line">        &lt;description&gt;JDBC connect string for a JDBC metastore&lt;/description&gt;    </div><div class="line">	&lt;/property&gt;   </div><div class="line">	&lt;property&gt; </div><div class="line">        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt; </div><div class="line">        &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt; </div><div class="line">        &lt;description&gt;Driver class name for a JDBC metastore&lt;/description&gt;     </div><div class="line">	&lt;/property&gt;               </div><div class="line"> </div><div class="line">	&lt;property&gt; </div><div class="line">        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</div><div class="line">        &lt;value&gt;hive&lt;/value&gt;</div><div class="line">        &lt;description&gt;username to use against metastore database&lt;/description&gt;</div><div class="line">	&lt;/property&gt;</div><div class="line">	&lt;property&gt;  </div><div class="line">        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</div><div class="line">        &lt;value&gt;hive&lt;/value&gt;</div><div class="line">        &lt;description&gt;password to use against metastore database&lt;/description&gt;  </div><div class="line">	&lt;/property&gt;</div></pre></td></tr></table></figure></p>
<h3 id="下载mysql-connector-java-5-1-32-bin-jar"><a href="#下载mysql-connector-java-5-1-32-bin-jar" class="headerlink" title="下载mysql-connector-java-5.1.32-bin.jar"></a>下载mysql-connector-java-5.1.32-bin.jar</h3><p>这里用5.1.32版本测试不报错，5.1.38会报warn</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#将连接jar包拷贝到Hive的lib目录</div><div class="line">$ cp mysql-connector-java-5.1.32-bin.jar /home/ubuntu/cloud/apache-hive-1.2.1-bin/lib/</div></pre></td></tr></table></figure>
<h3 id="若要装hive客户端可在客户端节点设置"><a href="#若要装hive客户端可在客户端节点设置" class="headerlink" title="若要装hive客户端可在客户端节点设置"></a>若要装hive客户端可在客户端节点设置</h3><p><code>vim hive-site.xml</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line"></div><div class="line">&lt;!-- thrift://&lt;host_name&gt;:&lt;port&gt; 默认端口是9083 --&gt;</div><div class="line">&lt;property&gt;</div><div class="line">&lt;name&gt;hive.metastore.uris&lt;/name&gt;</div><div class="line">  &lt;value&gt;thrift://master:9083&lt;/value&gt;</div><div class="line">  &lt;description&gt;Thrift uri for the remote metastore. Used by metastore client to connect to remote metastore.&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div><div class="line"> </div><div class="line">&lt;!--  hive表的默认存储路径 --&gt;</div><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;</div><div class="line">  &lt;value&gt;/user/hive/warehouse&lt;/value&gt;</div><div class="line">  &lt;description&gt;location of default database for the warehouse&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>
<h3 id="Hive启动"><a href="#Hive启动" class="headerlink" title="Hive启动"></a>Hive启动</h3><p>要启动metastore服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ hive --service metastore &amp;</div><div class="line">$ jps</div><div class="line">10288 RunJar  #多了一个进程</div><div class="line">9365 NameNode</div><div class="line">9670 SecondaryNameNode</div><div class="line">11096 Jps</div><div class="line">9944 NodeManager</div><div class="line">9838 ResourceManager</div><div class="line">9471 DataNode</div></pre></td></tr></table></figure></p>
<p>启动hive命令行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ubuntu@master:~$ hive</div><div class="line"></div><div class="line">Logging initialized using configuration in jar:file:/home/ubuntu/cloud/apache-hive-1.2.1-bin/lib/hive-common-1.2.1.jar!/hive-log4j.properties</div><div class="line">hive&gt; show tables;</div><div class="line">OK</div><div class="line">Time taken: 0.705 seconds</div></pre></td></tr></table></figure></p>
<p>启动hiveserver2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hive --service hiveserver2 start &amp;</div></pre></td></tr></table></figure></p>
<h3 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h3><p>问题：创建表出先如下错误，删除表卡住</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. MetaException(message:For direct MetaStore DB connections, we don&apos;t support retries at the client level.</div></pre></td></tr></table></figure>
<p>初始化<br>注意：初始化之前先删除hdfs上的metastore,否则会出错<code>/user/hive/warehouse</code><br>在hive服务端输入以下命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">schematool -dbType mysql -initSchema</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/20/oracle启动dbstart出错或无反应的解决办法及自启动/" itemprop="url">
                  oracle启动dbstart出错或无反应的解决办法及自启动
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-20T09:51:07+08:00" content="2016-08-20">
              2016-08-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/20/oracle启动dbstart出错或无反应的解决办法及自启动/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/20/oracle启动dbstart出错或无反应的解决办法及自启动/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/20/oracle启动dbstart出错或无反应的解决办法及自启动/" class="leancloud_visitors" data-flag-title="oracle启动dbstart出错或无反应的解决办法及自启动">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="问题一"><a href="#问题一" class="headerlink" title="问题一"></a>问题一</h3><p>启动dbstart 报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ORACLE_HOME_LISTNER is not SET, unable to auto-start Oracle Net Listener Usage: /home/oracle/oracle11g/product/11.2.0/dbhome_1/bin/dbstart ORACLE_HOME</div></pre></td></tr></table></figure></p>
<p>linux成功安装Oracle后切换到Oracle用户后，直接使用<code>dbstart</code>($ORACLE_HOME/bin中)启动oracle数据库报错如上。原因是dbstart调用的tnslsnr脚本位置有错。解决办法：<br>打开该脚本：<code>vim $ORACLE_HOME/bin/dbstart</code><br>查找“ORACLE_HOME_LISTENER”变量的定义处，<br>修改<br><code>ORACLE_HOME_LISTENER＝$1</code><br>为<code>ORACLE_HOME_LISTENER＝$ORACLE_HOME</code></p>
<h3 id="问题二"><a href="#问题二" class="headerlink" title="问题二"></a>问题二</h3><p>启动<code>dbstart</code>没有反应，即不报错也不显示启动信息<br>原因是oracle的配置需要修改才能使用dbstart启动对应的数据实例。<br>解决办法：</p>
<p><code>sudo vim /etc/oratab</code><br>将<code>orcl:/home/oracle/oracle11g/product/11.2.0/dbhome_1:N</code>改为<code>orcl:/home/oracle/oracle11g/product/11.2.0/dbhome_1:Y</code></p>
<h3 id="问题三"><a href="#问题三" class="headerlink" title="问题三"></a>问题三</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;dbstart</div><div class="line">Can&apos;t find init file for Database &quot;orcl&quot;.</div><div class="line"></div><div class="line">Database &quot;orcl&quot; NOT started.</div></pre></td></tr></table></figure>
<p>原因就是没有找到init文件 我的数据库实例是orcl<br>这个文件<code>在$ORACLE_HOME/dbs/</code>目录下<br><code>cd $ORACLE_HOME/dbs</code><br>解决办法就是建立一个initorcl.ora的软连接就可以了<br><code>ln -s spfileego.ora initorcl.ora</code></p>
<h3 id="Oracle自启动"><a href="#Oracle自启动" class="headerlink" title="Oracle自启动"></a>Oracle自启动</h3><p>创建开机自动启动数据库的脚本<br>开一个普通的字符终端连接到UbuntuServer，运行如下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"># vi /etc/init.d/Oracledb</div><div class="line">文件内容如下：</div><div class="line">#!/bin/bash</div><div class="line">#</div><div class="line"># /etc/init.d/oracledb</div><div class="line">#</div><div class="line"># Run-level Startup script for the Oracle Instance, Listener, and</div><div class="line"># Web Interface</div><div class="line"></div><div class="line">export ORACLE_HOME=/home/oracle/oracle11g/product/11.2.0/dbhome_1</div><div class="line">export ORACLE_SID=orcl</div><div class="line">export PATH=$ORACLE_HOME/bin:$PATH</div><div class="line"></div><div class="line">ORA_OWNR=&quot;oracle&quot;</div><div class="line"># if the executables do not exist -- display error</div><div class="line">if [ ! -f $ORACLE_HOME/bin/dbstart -o ! -d $ORACLE_HOME ]</div><div class="line">then</div><div class="line">echo &quot;Oracle startup: cannot start&quot;</div><div class="line">exit 1</div><div class="line">fi</div><div class="line"># depending on parameter -- startup, shutdown, restart</div><div class="line"># of the instance and listener or usage display</div><div class="line">case &quot;$1&quot; in</div><div class="line">start)</div><div class="line"># Oracle listener and instance startup</div><div class="line">echo -n &quot;Starting Oracle: &quot;</div><div class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/lsnrctl start&quot;</div><div class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/dbstart&quot;</div><div class="line">touch /var/lock/oracle</div><div class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/emctl start dbconsole&quot;</div><div class="line">echo &quot;OK&quot;</div><div class="line">;;</div><div class="line">stop)</div><div class="line"># Oracle listener and instance shutdown</div><div class="line">echo -n &quot;Shutdown Oracle: &quot;</div><div class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/lsnrctl stop&quot;</div><div class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/dbshut&quot;</div><div class="line">rm -f /var/lock/oracle</div><div class="line">su $ORA_OWNR -c &quot;$ORACLE_HOME/bin/emctl stop dbconsole&quot;</div><div class="line">echo &quot;OK&quot;</div><div class="line">;;</div><div class="line">reload|restart)</div><div class="line">$0 stop</div><div class="line">$0 start</div><div class="line">;;</div><div class="line">*)</div><div class="line">echo &quot;Usage: `basename $0` start|stop|restart|reload&quot;</div><div class="line">exit 1</div><div class="line">esac</div><div class="line">exit 0</div></pre></td></tr></table></figure></p>
<p>再运行如下命令设置权限，并放到启动脚本中去：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># chmod 755 /etc/init.d/Oracledb</div><div class="line"># update-rc.d Oracledb defaults 99</div></pre></td></tr></table></figure></p>
<p>最后：<br><code># vi /etc/oratab</code><br>把文件中的N改成Y，即”orcl:/opt/oracle/product/db:N”修改为”orcl:/opt/oracle/product/db:Y”。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/19/Linux日常操作笔记/" itemprop="url">
                  Linux日常操作笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-19T09:30:00+08:00" content="2016-08-19">
              2016-08-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/19/Linux日常操作笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/19/Linux日常操作笔记/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/19/Linux日常操作笔记/" class="leancloud_visitors" data-flag-title="Linux日常操作笔记">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="查看当前所在的工作目录的全路径-pwd"><a href="#查看当前所在的工作目录的全路径-pwd" class="headerlink" title="查看当前所在的工作目录的全路径 pwd"></a>查看当前所在的工作目录的全路径 pwd</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# pwd</div><div class="line">/root</div></pre></td></tr></table></figure>
<h3 id="查看当前系统的时间-date"><a href="#查看当前系统的时间-date" class="headerlink" title="查看当前系统的时间 date"></a>查看当前系统的时间 date</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# date +%Y-%m-%d</div><div class="line">2016-07-26</div><div class="line"></div><div class="line">date +%Y-%m-%d  --date=&quot;-1 day&quot; #加减也可以 month | year</div><div class="line">2016-07-25</div><div class="line"></div><div class="line">[root@localhost ~]# date -s &quot;2016-07-28 16:12:00&quot; ## 修改时间</div><div class="line">Thu Jul 28 16:12:00 PDT 2016</div></pre></td></tr></table></figure>
<h3 id="查看有谁在线（哪些人登陆到了服务器）"><a href="#查看有谁在线（哪些人登陆到了服务器）" class="headerlink" title="查看有谁在线（哪些人登陆到了服务器）"></a>查看有谁在线（哪些人登陆到了服务器）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">who  查看当前在线</div><div class="line">[root@localhost ~]# who</div><div class="line">hadoop   tty1         2016-07-26 00:01 (:0)</div><div class="line">hadoop   pts/0        2016-07-26 00:49 (:0.0)</div><div class="line">root     pts/1        2016-07-26 00:50 (192.168.233.1)</div></pre></td></tr></table></figure>
<p>###last 查看最近的登陆历史记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# last</div><div class="line">root     pts/1        192.168.233.1    Tue Jul 26 00:50   still logged in   </div><div class="line">hadoop   pts/0        :0.0             Tue Jul 26 00:49   still logged in   </div><div class="line">hadoop   tty1         :0               Tue Jul 26 00:01   still logged in   </div><div class="line">reboot   system boot  2.6.32-573.el6.x Tue Jul 26 07:58 - 16:23 (2+08:24)</div></pre></td></tr></table></figure>
<h3 id="关机-重启"><a href="#关机-重启" class="headerlink" title="关机/重启"></a>关机/重启</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">关机（必须用root用户）</div><div class="line">shutdown -h now  ## 立刻关机</div><div class="line">shutdown -h +10  ##  10分钟以后关机</div><div class="line">shutdown -h 12:00:00  ##12点整的时候关机</div><div class="line">halt   #  等于立刻关机</div><div class="line"></div><div class="line">重启</div><div class="line">shutdown -r now</div><div class="line">reboot   # 等于立刻重启</div></pre></td></tr></table></figure>
<h3 id="清屏"><a href="#清屏" class="headerlink" title="清屏"></a>清屏</h3><p><code>clear    ## 或者用快捷键  ctrl + l</code></p>
<h3 id="退出当前进程"><a href="#退出当前进程" class="headerlink" title="退出当前进程"></a>退出当前进程</h3><p><code>ctrl+c   ##有些程序也可以用q键退出</code></p>
<h3 id="挂起当前进程"><a href="#挂起当前进程" class="headerlink" title="挂起当前进程"></a>挂起当前进程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ctrl+z   ## 进程会挂起到后台</div><div class="line">bg jobid  ## 让进程在后台继续执行</div><div class="line">fg jobid   ## 让进程回到前台</div></pre></td></tr></table></figure>
<h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><p>相当于java中System.out.println(userName)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# a=&quot;hi boy&quot;</div><div class="line">[root@localhost ~]# echo a</div><div class="line">a</div><div class="line">[root@localhost ~]# echo $a</div><div class="line">hi boy</div></pre></td></tr></table></figure></p>
<h3 id="目录操作"><a href="#目录操作" class="headerlink" title="目录操作"></a>目录操作</h3><p>查看目录信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ls /   ## 查看根目录下的子节点（文件夹和文件）信息</div><div class="line">ls -al ##  -a是显示隐藏文件   -l是以更详细的列表形式显示</div><div class="line">ls -l  ##有一个别名： ll    可以直接使用ll  &lt;是两个L&gt;</div></pre></td></tr></table></figure></p>
<h3 id="切换工作目录"><a href="#切换工作目录" class="headerlink" title="切换工作目录"></a>切换工作目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">cd  /home/hadoop    ## 切换到用户主目录</div><div class="line">cd ~     ## 切换到用户主目录</div><div class="line">cd -     ##  回退到上次所在的目录</div><div class="line">cd  什么路径都不带，则回到用户的主目录</div></pre></td></tr></table></figure>
<h3 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir aaa     ## 这是相对路径的写法 </div><div class="line">mkdir  /data    ## 这是绝对路径的写法 </div><div class="line">mkdir -p  aaa/bbb/ccc   ## 级联创建目录</div></pre></td></tr></table></figure>
<h3 id="删除文件夹"><a href="#删除文件夹" class="headerlink" title="删除文件夹"></a>删除文件夹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rmdir  aaa   ## 可以删除空目录</div><div class="line">rm  -r  aaa   ## 可以把aaa整个文件夹及其中的所有子节点全部删除</div><div class="line">rm  -rf  aaa   ## 强制删除aaa</div></pre></td></tr></table></figure>
<h3 id="修改文件夹名称"><a href="#修改文件夹名称" class="headerlink" title="修改文件夹名称"></a>修改文件夹名称</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mv  aaa  boy</div><div class="line">mv本质上是移动</div><div class="line">mv  install.log  aaa/  将当前目录下的install.log 移动到aaa文件夹中去</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">rename 可以用来批量更改文件名</div><div class="line">[root@localhost aaa]# ll</div><div class="line">total 0</div><div class="line">-rw-r--r--. 1 root root 0 Jul 28 17:33 1.txt</div><div class="line">-rw-r--r--. 1 root root 0 Jul 28 17:33 2.txt</div><div class="line">-rw-r--r--. 1 root root 0 Jul 28 17:33 3.txt</div><div class="line">[root@localhost aaa]# rename .txt .txt.bak *</div><div class="line">[root@localhost aaa]# ll</div><div class="line">total 0</div><div class="line">-rw-r--r--. 1 root root 0 Jul 28 17:33 1.txt.bak</div><div class="line">-rw-r--r--. 1 root root 0 Jul 28 17:33 2.txt.bak</div><div class="line">-rw-r--r--. 1 root root 0 Jul 28 17:33 3.txt.bak</div></pre></td></tr></table></figure>
<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><p>创建文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">touch  somefile.1       </div><div class="line">## 创建一个空文件</div><div class="line"></div><div class="line">echo &quot;hi,boy&quot; &gt; somefile.2     </div><div class="line">## 利用重定向“&gt;”的功能，将一条指令的输出结果写入到一个文件中，会覆盖原文件内容，如果指定的文件不存在，则会创建出来</div><div class="line"></div><div class="line">echo &quot;hi baby&quot; &gt;&gt; somefile.2    </div><div class="line">## 将一条指令的输出结果追加到一个文件中，不会覆盖原文件内容</div></pre></td></tr></table></figure></p>
<h3 id="vi文本编辑器"><a href="#vi文本编辑器" class="headerlink" title="vi文本编辑器"></a>vi文本编辑器</h3><p>最基本用法<br>vi  somefile.4<br>1 首先会进入“一般模式”，此模式只接受各种快捷键，不能编辑文件内容<br>2 按i键，就会从一般模式进入编辑模式，此模式下，敲入的都是文件内容<br>3 编辑完成之后，按Esc键退出编辑模式，回到一般模式；<br>4 再按：，进入“底行命令模式”，输入wq命令，回车即可</p>
<p>常用快捷键<br>一些有用的快捷键（在一般模式下使用）：<br>a   在光标后一位开始插入<br>A   在该行的最后插入<br>I   在该行的最前面插入<br>gg   直接跳到文件的首行<br>G    直接跳到文件的末行<br>dd    删除一行<br>3dd   删除3行<br>yy    复制一行<br>3yy   复制3行<br>p     粘贴<br>u     undo<br>v        进入字符选择模式，选择完成后，按y复制，按p粘贴<br>ctrl+v   进入块选择模式，选择完成后，按y复制，按p粘贴<br>shift+v  进入行选择模式，选择完成后，按y复制，按p粘贴</p>
<p>查找并替换<br>1 显示行号<br>:set nu<br>2 隐藏行号<br>:set nonu<br>3 查找关键字<br>:/you       ## 效果：查找文件中出现的you，并定位到第一个找到的地方，按n可以定位到下一个匹配位置（按N定位到上一个）<br>4 替换操作<br>:s/sad/bbb    查找光标所在行的第一个sad，替换为bbb<br>:%s/sad/bbb      查找文件中所有sad，替换为bbb</p>
<h3 id="拷贝-删除-移动"><a href="#拷贝-删除-移动" class="headerlink" title="拷贝/删除/移动"></a>拷贝/删除/移动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cp  somefile.1   /home/hadoop/</div><div class="line">rm /home/hadoop/somefile.1</div><div class="line">rm -f /home/hadoop/somefile.1</div><div class="line">mv /home/hadoop/somefile.1 ../</div></pre></td></tr></table></figure>
<h3 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">cat    somefile      一次性将文件内容全部输出（控制台）</div><div class="line">more   somefile      可以翻页查看, 下翻一页(空格)    上翻一页（b）   退出（q）</div><div class="line">less   somefile      可以翻页查看,下翻一页(空格)    上翻一页（b），上翻一行(↑)  下翻一行（↓）  可以搜索关键字（/keyword）</div><div class="line">跳到文件末尾： G</div><div class="line">跳到文件首行： gg</div><div class="line">退出less ：  q</div><div class="line"></div><div class="line">tail -10  install.log  查看文件尾部的10行</div><div class="line">tail +10  install.log  查看文件 10--&gt;末行</div><div class="line">tail -f install.log    小f跟踪文件的唯一inode号，就算文件改名后，还是跟踪原来这个inode表示的文件</div><div class="line">tail -F install.log    大F按照文件名来跟踪</div><div class="line"></div><div class="line">head -10  install.log   查看文件头部的10行</div></pre></td></tr></table></figure>
<h3 id="打包压缩"><a href="#打包压缩" class="headerlink" title="打包压缩"></a>打包压缩</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">1、gzip压缩</div><div class="line">gzip a.txt</div><div class="line"></div><div class="line">2、解压</div><div class="line">gunzip a.txt.gz</div><div class="line">gzip -d a.txt.gz</div><div class="line"></div><div class="line">3、bzip2压缩</div><div class="line">bzip2 a</div><div class="line"></div><div class="line">4、解压</div><div class="line">bunzip2 a.bz2</div><div class="line">bzip2 -d a.bz2</div><div class="line"></div><div class="line">5、打包：将指定文件或文件夹</div><div class="line">tar -cvf bak.tar  ./aaa</div><div class="line">将/etc/password追加文件到bak.tar中(r)</div><div class="line">tar -rvf bak.tar /etc/password</div><div class="line"></div><div class="line">6、解压</div><div class="line">tar -xvf bak.tar</div><div class="line"></div><div class="line">7、打包并压缩</div><div class="line">tar -zcvf a.tar.gz  aaa/</div><div class="line"></div><div class="line">8、解包并解压缩(重要的事情说三遍!!!)</div><div class="line">tar  -zxvf  a.tar.gz</div><div class="line">解压到/usr/下</div><div class="line">tar  -zxvf  a.tar.gz  -C  /usr</div><div class="line"></div><div class="line">9、查看压缩包内容</div><div class="line">tar -ztvf a.tar.gz</div><div class="line">zip/unzip</div><div class="line"></div><div class="line">10、打包并压缩成bz2</div><div class="line">tar -jcvf a.tar.bz2</div><div class="line"></div><div class="line">11、解压bz2</div><div class="line">tar -jxvf a.tar.bz2</div></pre></td></tr></table></figure>
<h3 id="查找命令"><a href="#查找命令" class="headerlink" title="查找命令"></a>查找命令</h3><p>常用查找命令的使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">1、查找可执行的命令所在的路径：</div><div class="line">which ls</div><div class="line"></div><div class="line">2、查找可执行的命令和帮助的位置：</div><div class="line">whereis ls</div><div class="line"></div><div class="line">3、从某个文件夹开始查找文件</div><div class="line">find / -name &quot;hadooop*&quot;</div><div class="line">find / -name &quot;hadooop*&quot; -ls</div><div class="line"></div><div class="line">4、查找并删除</div><div class="line">find / -name &quot;hadooop*&quot; -ok rm &#123;&#125; \;</div><div class="line">find / -name &quot;hadooop*&quot; -exec rm &#123;&#125; \;</div><div class="line"></div><div class="line">5、查找用户为hadoop的文件</div><div class="line">find  /usr  -user  hadoop  -ls</div><div class="line"></div><div class="line">6、查找用户为hadoop的文件夹</div><div class="line">find /home -user hadoop -type d -ls</div><div class="line"></div><div class="line">7、查找权限为777的文件</div><div class="line">find / -perm -777 -type d -ls</div><div class="line"></div><div class="line">8、显示命令历史</div><div class="line">history</div></pre></td></tr></table></figure>
<h3 id="grep命令"><a href="#grep命令" class="headerlink" title="grep命令"></a>grep命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">1 基本使用</div><div class="line">查询包含hadoop的行</div><div class="line">grep hadoop /etc/password</div><div class="line">grep aaa  ./*.txt </div><div class="line"></div><div class="line">2 cut截取以:分割保留第七段</div><div class="line">grep hadoop /etc/passwd | cut -d: -f7</div><div class="line"></div><div class="line">3 查询不包含hadoop的行</div><div class="line">grep -v hadoop /etc/passwd</div><div class="line"></div><div class="line">4 正则表达包含hadoop</div><div class="line">grep &apos;hadoop&apos; /etc/passwd</div><div class="line"></div><div class="line">5 正则表达(点代表任意一个字符)</div><div class="line">grep &apos;h.*p&apos; /etc/passwd</div><div class="line"></div><div class="line">6 正则表达以hadoop开头</div><div class="line">grep &apos;^hadoop&apos; /etc/passwd</div><div class="line"></div><div class="line">7 正则表达以hadoop结尾</div><div class="line">grep &apos;hadoop$&apos; /etc/passwd</div><div class="line"></div><div class="line">规则：</div><div class="line">.  : 任意一个字符</div><div class="line">a* : 任意多个a(零个或多个a)</div><div class="line">a? : 零个或一个a</div><div class="line">a+ : 一个或多个a</div><div class="line">.* : 任意多个任意字符</div><div class="line">\. : 转义.</div><div class="line">o\&#123;2\&#125; : o重复两次</div><div class="line"></div><div class="line">查找不是以#开头的行</div><div class="line">grep -v &apos;^#&apos; a.txt | grep -v &apos;^$&apos; </div><div class="line"></div><div class="line">以h或r开头的</div><div class="line">grep &apos;^[hr]&apos; /etc/passwd</div><div class="line"></div><div class="line">不是以h和r开头的</div><div class="line">grep &apos;^[^hr]&apos; /etc/passwd</div><div class="line"></div><div class="line">不是以h到r开头的</div><div class="line">grep &apos;^[^h-r]&apos; /etc/passwd</div></pre></td></tr></table></figure>
<h3 id="文件权限的操作"><a href="#文件权限的操作" class="headerlink" title="文件权限的操作"></a>文件权限的操作</h3><p>linux文件权限的描述格式解读</p>
<p>drwxr-xr-x      （也可以用二进制表示  111 101 101  –&gt;  755）</p>
<p>d：标识节点类型（d：文件夹   -：文件  l:链接）<br>r：可读   w：可写    x：可执行<br>第一组rwx：  ## 表示这个文件的拥有者对它的权限：可读可写可执行<br>第二组r-x：  ## 表示这个文件的所属组用户对它的权限：可读，不可写，可执行<br>第三组r-x：  ## 表示这个文件的其他用户（相对于上面两类用户）对它的权限：可读，不可写，可执行</p>
<h4 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">chmod g-rw haha.dat		 ## 表示将haha.dat对所属组的rw权限取消</div><div class="line">chmod o-rw haha.dat		 ## 表示将haha.dat对其他人的rw权限取消</div><div class="line">chmod u+x haha.dat		 ## 表示将haha.dat对所属用户的权限增加x</div><div class="line">chmod a-x haha.dat               ## 表示将haha.dat对所用户取消x权限</div><div class="line"></div><div class="line"></div><div class="line">也可以用数字的方式来修改权限</div><div class="line">chmod 664 haha.dat   </div><div class="line">就会修改成   rw-rw-r--</div><div class="line">如果要将一个文件夹的所有内容权限统一修改，则可以-R参数</div><div class="line">chmod -R 770 aaa/</div></pre></td></tr></table></figure>
<h4 id="修改文件所有权"><a href="#修改文件所有权" class="headerlink" title="修改文件所有权"></a>修改文件所有权</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;只有root权限能执行&gt;</div><div class="line">chown angela  aaa		## 改变所属用户</div><div class="line">chown :angela  aaa		## 改变所属组</div><div class="line">chown angela:angela aaa/	## 同时修改所属用户和所属组</div></pre></td></tr></table></figure>
<h3 id="基本的用户管理"><a href="#基本的用户管理" class="headerlink" title="基本的用户管理"></a>基本的用户管理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">添加一个用户：</div><div class="line">useradd spark</div><div class="line">passwd  spark     根据提示设置密码即可</div><div class="line"></div><div class="line">删除一个用户：</div><div class="line">userdel -r spark     加一个-r就表示把用户及用户的主目录都删除</div></pre></td></tr></table></figure>
<h4 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">添加一个tom用户，设置它属于users组，并添加注释信息</div><div class="line">分步完成：useradd tom</div><div class="line">          usermod -g users tom</div><div class="line">	  usermod -c &quot;hr tom&quot; tom</div><div class="line">一步完成：useradd -g users -c &quot;hr tom&quot; tom</div><div class="line"></div><div class="line">设置tom用户的密码</div><div class="line">passwd tom</div></pre></td></tr></table></figure>
<h4 id="修改用户"><a href="#修改用户" class="headerlink" title="修改用户"></a>修改用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">修改tom用户的登陆名为tomcat</div><div class="line">usermod -l tomcat tom</div><div class="line"></div><div class="line">将tomcat添加到sys和root组中</div><div class="line">usermod -G sys,root tomcat</div><div class="line"></div><div class="line">查看tomcat的组信息</div><div class="line">groups tomcat</div></pre></td></tr></table></figure>
<h4 id="用户组操作"><a href="#用户组操作" class="headerlink" title="用户组操作"></a>用户组操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">添加一个叫america的组</div><div class="line">groupadd america</div><div class="line"></div><div class="line">将jerry添加到america组中</div><div class="line">usermod -g america jerry</div><div class="line"></div><div class="line">将tomcat用户从root组和sys组删除</div><div class="line">gpasswd -d tomcat root</div><div class="line">gpasswd -d tomcat sys</div><div class="line"></div><div class="line">将america组名修改为am</div><div class="line">groupmod -n am america</div></pre></td></tr></table></figure>
<h4 id="为用户配置sudo权限"><a href="#为用户配置sudo权限" class="headerlink" title="为用户配置sudo权限"></a>为用户配置sudo权限</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">用root编辑 vi /etc/sudoers</div><div class="line">在文件的如下位置，为hadoop添加一行即可</div><div class="line">root    ALL=(ALL)       ALL     </div><div class="line">hadoop  ALL=(ALL)       ALL</div><div class="line"></div><div class="line">然后，hadoop用户就可以用sudo来执行系统级别的指令</div><div class="line">[root@localhost ~]$ sudo useradd xiaoming</div></pre></td></tr></table></figure>
<h3 id="系统管理操作"><a href="#系统管理操作" class="headerlink" title="系统管理操作"></a>系统管理操作</h3><h4 id="挂载外部存储设备"><a href="#挂载外部存储设备" class="headerlink" title="挂载外部存储设备"></a>挂载外部存储设备</h4><p>可以挂载光盘、硬盘、磁带、光盘镜像文件等</p>
<ul>
<li>挂载光驱</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir   /mnt/cdrom      创建一个目录，用来挂载</div><div class="line">mount -t iso9660 -o ro /dev/cdrom /mnt/cdrom/     将设备/dev/cdrom挂载到 挂载点 ：  /mnt/cdrom中</div></pre></td></tr></table></figure>
<ul>
<li>挂载光盘镜像文件（.iso文件）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mount -t iso9660 -o loop  /home/hadoop/Centos-6.7.DVD.iso /mnt/centos</div><div class="line">注：挂载的资源在重启后即失效，需要重新挂载。要想自动挂载，可以将挂载信息设置到/etc/fstab配置文件中，如下：</div><div class="line">/dev/cdrom              /mnt/cdrom              iso9660 defaults        0 0</div></pre></td></tr></table></figure>
<h4 id="卸载-umount"><a href="#卸载-umount" class="headerlink" title="卸载 umount"></a>卸载 umount</h4><p><code>umount /mnt/cdrom</code></p>
<h4 id="存储空间查看"><a href="#存储空间查看" class="headerlink" title="存储空间查看"></a>存储空间查看</h4><p><code>df -h</code></p>
<h4 id="统计文件或文件夹的大小"><a href="#统计文件或文件夹的大小" class="headerlink" title="统计文件或文件夹的大小"></a>统计文件或文件夹的大小</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">du -sh  /mnt/cdrom/packages</div><div class="line">df -h    查看磁盘的空间</div><div class="line">wc -lwc 统计文件行数、字数、字节数</div></pre></td></tr></table></figure>
<h4 id="系统服务管理"><a href="#系统服务管理" class="headerlink" title="系统服务管理"></a>系统服务管理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">service sshd status</div><div class="line">service sshd stop </div><div class="line">service sshd start</div><div class="line">service sshd restart</div></pre></td></tr></table></figure>
<h4 id="系统启动级别管理"><a href="#系统启动级别管理" class="headerlink" title="系统启动级别管理"></a>系统启动级别管理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">vi  /etc/inittab</div><div class="line"></div><div class="line">       # Default runlevel. The runlevels used are:</div><div class="line">       #   0 - halt (Do NOT set initdefault to this)</div><div class="line">       #   1 - Single user mode</div><div class="line">       #   2 - Multiuser, without NFS (The same as 3, if you do not have networking)</div><div class="line">       #   3 - Full multiuser mode</div><div class="line">       #   4 - unused</div><div class="line">       #   5 - X11</div><div class="line">       #   6 - reboot (Do NOT set initdefault to this)</div><div class="line">       #</div><div class="line">       id:3:initdefault:</div><div class="line">       ## 通常将默认启动级别设置为：3</div></pre></td></tr></table></figure>
<h4 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">top</div><div class="line">free</div><div class="line">ps -ef | grep ssh</div><div class="line">kill -9</div></pre></td></tr></table></figure>
<h3 id="SSH免密登陆配置"><a href="#SSH免密登陆配置" class="headerlink" title="SSH免密登陆配置"></a>SSH免密登陆配置</h3><h4 id="SSH工作机制"><a href="#SSH工作机制" class="headerlink" title="SSH工作机制"></a>SSH工作机制</h4><p>1、相关概念<br>SSH 为 Secure Shell（安全外壳协议） 的缩写。<br>很多ftp、pop和telnet在本质上都是不安全的，因为它们在网络上用明文传送口令和数据，别有用心的人非常容易就可以截获这些口令和数据。<br>而SSH就是专为远程登录会话和其他网络服务提供安全性的协议。</p>
<p>SSH是由客户端和服务端的软件组成的<br>服务端是一个守护进程(sshd)，他在后台运行并响应来自客户端的连接请求。<br>客户端包含ssh程序以及像scp（远程拷贝）、slogin（远程登陆）、sftp（安全文件传输）等其他的应用程序。</p>
<p>2、认证机制<br>从客户端来看，SSH提供两种级别的安全验证。</p>
<p>第一种级别（基于口令的安全验证）<br>只要你知道自己帐号和口令，就可以登录到远程主机。</p>
<p>第二种级别（基于密钥的安全验证）<br>需要依靠密匙，也就是你必须为自己创建一对密匙，并把公用密匙放在需要访问的服务器上。如果你要连接到SSH服务器上，<br>客户端软件就会向服务器发出请求，请求用你的密匙进行安全验证。服务器收到请求之后，先在该服务器上你的主目录下寻找你的公用密匙，<br>然后把它和你发送过来的公用密匙进行比较。如果两个密匙一致，服务器就用公用密匙加密“质询”（challenge）并把它发送给客户端软件。<br>客户端软件收到“质询”之后就可以用你的私人密匙解密再把它发送给服务器。</p>
<h4 id="密钥登陆方式配置"><a href="#密钥登陆方式配置" class="headerlink" title="密钥登陆方式配置"></a>密钥登陆方式配置</h4><p>假如 A  要登陆  B<br>在A上操作：<br>1/ 首先生成密钥对<br><code>ssh-keygen</code>   (提示时，直接回车即可)<br>2/ 再将A自己的公钥拷贝并追加到B的授权列表文件<code>authorized_keys</code>中<br><code>ssh-copy-id   B</code></p>
<h3 id="网络管理"><a href="#网络管理" class="headerlink" title="网络管理"></a>网络管理</h3><h4 id="主机名配置"><a href="#主机名配置" class="headerlink" title="主机名配置"></a>主机名配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1/ 查看主机名</div><div class="line">hostname</div><div class="line"></div><div class="line">2/ 修改主机名(重启后无效)</div><div class="line">hostname hadoop</div><div class="line"></div><div class="line">3/ 修改主机名(重启后永久生效) </div><div class="line">vi /ect/sysconfig/network</div></pre></td></tr></table></figure>
<h4 id="IP地址配置"><a href="#IP地址配置" class="headerlink" title="IP地址配置"></a>IP地址配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">修改IP地址</div><div class="line">1/ 方式一：setup</div><div class="line">用root输入setup命令，进入交互式修改界面</div><div class="line"></div><div class="line">2/ 方式二：修改配置文件 一般使用这种方法</div><div class="line">(重启后永久生效)</div><div class="line">vi /etc/sysconfig/network-scripts/ifcfg-eth0</div><div class="line"></div><div class="line">3/ 方式三：ifconfig命令</div><div class="line">(重启后无效)</div><div class="line">ifconfig eth0 192.168.12.22</div></pre></td></tr></table></figure>
<h3 id="网络服务管理"><a href="#网络服务管理" class="headerlink" title="网络服务管理"></a>网络服务管理</h3><p>1 后台服务管理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">service network status    查看指定服务的状态</div><div class="line">service network stop     停止指定服务</div><div class="line">service network start     启动指定服务</div><div class="line">service network restart   重启指定服务</div><div class="line">service --status-all       查看系统中所有的后台服务</div></pre></td></tr></table></figure></p>
<p>2 设置后台服务的自启配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">chkconfig   查看所有服务器自启配置</div><div class="line">chkconfig iptables off   关掉指定服务的自动启动</div><div class="line">chkconfig iptables on   开启指定服务的自动启动</div></pre></td></tr></table></figure></p>
<p>转载自：</p>
<blockquote>
<p><a href="http://www.kuqin.com/shuoit/20160805/352716.html" target="_blank" rel="external">http://www.kuqin.com/shuoit/20160805/352716.html</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Skye" />
          <p class="site-author-name" itemprop="name">Skye</p>
          <p class="site-description motion-element" itemprop="description">学习总结 思想感悟</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">56</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/1811544100" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/Skyexu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Skye</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"skyexu"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("p2QERxuUt7diC0fdFhjqrKby-gzGzoHsz", "L1rxwRUiV2suWuAJN976CvgG");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
